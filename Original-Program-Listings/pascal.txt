----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 01

0001                   *
0002                   *       **********************
0003                   *       * R65 PASCAL RUNTIME *
0004                   *       **********************
0005                   *
0006                   * VERSION 5.3 01/06/82 RRICHARZ,RBAUMANN
0007                   *
0008                           TIT R65 PASCAL RUNTIME
0009                   *
0010                   * INCLUDES RANDOWM ACCESS FILE HANDLING,
0011                   * FLOATING POINT MATH, FILE HANDLIN ERROR
0012                   * TESTING (OPTIONAL)
0013                   *
0014                           ORG 0
0015                   *
0016  0000-            ACCU    BSS 4   TOP OF STACKELEMENT
0017                   X1      EQU ACCU        FLP ACCU
0018                   M1      EQU ACCU+1
0019  0004-            E       BSS 4   FLP SCRATCH REGISTER
0020  0008-            SP      BSS 2   CURRENT STACK (-128)
0021  000A-            PC      BSS 2   PROGRAM COUNTER
0022  000C-            RUNERR  BSS 1   RUNTIME ERROR CODE
0023  000D-            DEVICE  BSS 1   I/O DEVICE CODE
0024  000E-            ENDSTK  BSS 2   END OF STACK (-128)
0025  0010-            SIGN    BSS 1   TEMPORARY SIGN
0026  0011-            STPROG  BSS 2   START OF USER PROGRAM
0027  0013-            EOPROG  BSS 2   END OF USER PRORMA
0028  0015-            BUFFPN  BSS 1   INPUT BUFFER POINTER
0029  0016-            ENDBUF  BSS 1   END OF INPUT BUFFER
0030  0017-            BASE    BSS 2   CURRENT BASE (-128)
0031  0019-            ABASE   BSS 2   ALTERNATE BASE (-128)
0032  001B-            ARG1    BSS 2   TEMPORARY ARGUMENT
0033  001D-            ARG3    BSS 4   TEMPORARY REGISTERS
0034  0021-            ARG2    BSS 2
0035                   X2      EQU ARG1        FLP REGISTER
0036                   M2      EQU ARG1+1
0037  0023-            IOCHECK BSS 1   IO ERROR CHECKING FLAG
0038  0024-            LINBUF  BSS 56  INPUT LINE BUFFER
0039                   *
0040                   FILFLG  EQU $DA
0041                   FILERR  EQU $DB
0042                   FILDRV  EQU $DC
0043                   TRACK   EQU $DD
0044                   SECTOR  EQU $DE
0045                   DATA    EQU $E0
0046                   VIDPNT  EQU $E9
0047                   POINT   EQU $FA
0048                   KCHAR   EQU $FE
0049                   *
0050                   MULTA   EQU $14E0

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 02

0051                   MULTB   EQU $14E1
0052                   MULTR   EQU $14E2
0053                   *
0054                   FILTYP  EQU $0300
0055                   FILNAM  EQU $0301
0056                   FILCYC  EQU $0311
0057                   FILSTP  EQU $0312
0058                   FILLOC  EQU $0313
0059                   FILSIZ  EQU $0315
0060                   FILSA   EQU $031A
0061                   FILEA   EQU $031C
0062                   FILNM1  EQU $0320
0063                   FILCY1  EQU $0330
0064                   FILSA1  EQU $0331
0065                   SAVRST  EQU $0333
0066                   CURSEQ  EQU $0335
0067                   MAXSEQ  EQU $0336
0068                   MAXSIZ  EQU $0337
0069                   FIDRTB  EQU $0339
0070                   FIDVTB  EQU $0341
0071                   FIBPTB  EQU $0349
0072                   FIRCTB  EQU $0351
0073                   SFLAG   EQU $1781
0074                   NUMCHR  EQU $178A
0075                   VMON    EQU $17D5
0076                   *
0077                   GETKEY  EQU $E000
0078                   AUTOPR  EQU $E00C
0079                   ENDLIN  EQU $E024
0080                   PRTINF  EQU $E027
0081                   GETCHR  EQU $E003
0082                   GETLIN  EQU $E006
0083                   PRTCHR  EQU $E009
0084                   PRTBYT  EQU $E02D
0085                   PRTAX   EQU $E030
0086                   PRTRSA  EQU $E836
0087                   RDFILE  EQU $E815
0088                   SETFID  EQU $E81E
0089                   OPEN    EQU $F00F
0090                   READCH  EQU $F018
0091                   WRITCH  EQU $F01B
0092                   GETNAM  EQU $F815
0093                   *
0094  005C-                    ORG $2000
0095                   *
0096                           PAG

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 03

0097                   *
0098                   * ENTRY VECTORS
0099                   *
0100  2000- 4C 85 2A           JMP COLDST      COLD START ENTRY VECTOR
0101  2003- 4C 05 29           JMP WARMST      WARM START ENTRY VECTOR
0102  2006- 4C CA 28           JMP PERROR      PASCAL ERROR
0103                   *
0104  2009- 41 2D      USERST  WRD ENDCODE+32
0105  200B- FF C7      USEREND WRD $C7FF
0106                   *
0107  200D- 4C F2 FC   HARGUM  JMP $FCF2       #######
0108                   *
0109                   *
0110                   * P-CODE 00:  STOP      (END OF EXECUTION)
0111                   ******************
0112                   * NO ARGUMENTS
0113                   *
0114  2010- A5 11      STOP    LDA STPROG      IS ANOTHER PROGRAM
0115  2012- A6 12              LDX STPROG+1    RUNNING?
0116  2014- CD 09 20           CMP USERST
0117  2017- D0 1A              BNE STOP1
0118  2019- EC 0A 20           CPX USERST+1
0119  201C- D0 15              BNE STOP1
0120                   *
0121  201E- 20 27 E0           JSR PRTINF      NO, STOP PASCAL
0122  2021- 0D 0A 51           BYT $D,$A,'Quit Pascal',$D,$8A
0122  2024- 75 69 74 
0122  2027- 20 50 61 
0122  202A- 73 63 61 
0122  202D- 6C 0D 8A 
0123  2030- 6C D5 17           JMP (VMON)
0124                   *
0125  2033- 38         STOP1   SEC             YES, COMPUTE OLD SP
0126  2034- E9 8C              SBC =140
0127  2036- B0 01              BCS *+3
0128  2038- CA                 DEX
0129  2039- 85 08              STA SP
0130  203B- 86 09              STX SP+1
0131  203D- A0 8C              LDY =140
0132  203F- 20 57 27           JSR GETBACK
0133  2042- 85 13              STA EOPROG
0134  2044- 86 14              STX EOPROG+1
0135  2046- 20 57 27           JSR GETBACK
0136  2049- 85 11              STA STPROG
0137  204B- 86 12              STX STPROG+1
0138  204D- 20 57 27           JSR GETBACK
0139  2050- 85 0A              STA PC
0140  2052- 86 0B              STX PC+1
0141  2054- 20 57 27           JSR GETBACK
0142  2057- 85 17              STA BASE

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 04

0143  2059- 86 18              STX BASE+1
0144  205B- 20 57 27           JSR GETBACK
0145  205E- 85 00              STA ACCU
0146  2060- 86 01              STX ACCU+1
0147  2062- 4C 9B 29           JMP LOOP
0148                   *
0149                   *
0150  2065- 4C FF F0   DOPEN1  JMP $F0FF
0151  2068- 4C 45 F1   DOPEN4  JMP $F145
0152  206B- 4C 51 F1   PRFLB1  JMP $F151
0153  206E- 4C 59 F1   CPOINT  JMP $F159
0154  2071- 4C E0 F1   PREPSR  JMP $F1E0
0155  2074- 4C 9E F2   PREPSR1 JMP $F29E
0156  2077- 4C BF F2   CLOSE   JMP $F2BF
0157  207A- 4C 57 F4   READ    JMP $F457
0158  207D- 4C 25 F4   WRITE   JMP $F425
0159  2080- 4C A7 F4   PREPDO  JMP $F4A7
0160  2083- 4C FD F5   DISCER1 JMP $F5FD
0161  2086- 4C 25 F6   ENDDO   JMP $F625
0162  2089- 4C 2C F6   PREPRD  JMP $F62C
0163  208C- 4C 51 F6   PREPWRA JMP $F651
0164  208F- 4C 6D F6   PREPWRB JMP $F66D
0165                   *
0166                   *
0167                   * P-CODE 01: RETN       (RETURN FROM PROCEDURE
0168                   *****************
0169                   * NO ARGUMENTS
0170                   *
0171  2092- A5 17      RETN    LDA BASE        SP=BASE-2
0172  2094- 38                 SEC
0173  2095- E9 02              SBC =2
0174  2097- 85 08              STA SP
0175  2099- A5 18              LDA BASE+1
0176  209B- E9 00              SBC =0
0177  209D- 85 09              STA SP+1
0178  209F- A0 80              LDY =128        GET STACK TOP ELEMENT
0179  20A1- B1 08              LDA (SP),Y
0180  20A3- 85 00              STA ACCU
0181  20A5- C8                 INY
0182  20A6- B1 08              LDA (SP),Y
0183  20A8- 85 01              STA ACCU+1
0184  20AA- A0 84              LDY =132
0185  20AC- B1 08              LDA (SP),Y      GET SAVED OLD BASE
0186  20AE- 85 17              STA BASE
0187  20B0- C8                 INY
0188  20B1- B1 08              LDA (SP),Y
0189  20B3- 85 18              STA BASE+1
0190  20B5- C8                 INY
0191  20B6- B1 08              LDA (SP),Y      AND RETURN ADDRESS
0192  20B8- 18                 CLC

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 05

0193  20B9- 69 02              ADC =2
0194  20BB- 85 0A              STA PC
0195  20BD- C8                 INY
0196  20BE- B1 08              LDA (SP),Y
0197  20C0- 69 00              ADC =0
0198  20C2- 85 0B              STA PC+1
0199  20C4- 60                 RTS
0200                   *
0201                   * P-CODE 02: NEGA       (NEGATE ACCU)
0202                   *****************
0203                   * NO ARGUMENTS
0204                   *
0205  20C5- A9 00      NEGA    LDA =0
0206  20C7- 38                 SEC
0207  20C8- E5 00              SBC ACCU
0208  20CA- 85 00              STA ACCU
0209  20CC- A9 00              LDA =0
0210  20CE- E5 01              SBC ACCU+1
0211  20D0- 85 01              STA ACCU+1
0212  20D2- 60                 RTS
0213                   *
0214                   * P-CODE 03: ADDA       (ADD)
0215                   *****************
0216                   * NO ARGUMENTS
0217                   *
0218  20D3- A0 7E      ADDA    LDY =126
0219  20D5- 18                 CLC
0220  20D6- B1 08              LDA (SP),Y
0221  20D8- 65 00              ADC ACCU
0222  20DA- 85 00              STA ACCU
0223  20DC- C8                 INY
0224  20DD- B1 08              LDA (SP),Y
0225  20DF- 65 01              ADC ACCU+1
0226  20E1- 85 01              STA ACCU+1
0227                   *
0228  20E3- A5 08      DECS2   LDA SP
0229  20E5- 38                 SEC
0230  20E6- E9 02              SBC =2
0231  20E8- 85 08              STA SP
0232  20EA- B0 02              BCS *+4
0233  20EC- C6 09              DEC SP+1
0234  20EE- 60                 RTS
0235                   *
0236                   * P-CODE 04: SUBA       (SUBTRACT)
0237                   *****************
0238                   * NO ARGUMENTS
0239                   *
0240  20EF- A0 7E      SUBA    LDY =126
0241  20F1- 38                 SEC
0242  20F2- B1 08              LDA (SP),Y

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 06

0243  20F4- E5 00              SBC ACCU
0244  20F6- 85 00              STA ACCU
0245  20F8- C8                 INY
0246  20F9- B1 08              LDA (SP),Y
0247  20FB- E5 01              SBC ACCU+1
0248  20FD- 85 01              STA ACCU+1
0249  20FF- 4C E3 20           JMP DECS2
0250                   *
0251                   * P-CODE 05: MULA       (MULTIPLY)
0252                   *****************
0253                   * NO ARGUMENTS
0254                   *
0255  2102- 20 3C 21   MULA    JSR GETSIGN     COMPUTE SIGN OF RESULT
0256  2105- A5 00              LDA ACCU
0257  2107- 78                 SEI
0258  2108- 8D E0 14           STA MULTA
0259  210B- A5 1B              LDA ARG1        GET SAVED ARGUMENT
0260  210D- 8D E1 14           STA MULTB
0261  2110- AD E2 14           LDA MULTR
0262  2113- 85 00              STA ACCU
0263  2115- AD E3 14           LDA MULTR+1
0264  2118- A6 1C              LDX ARG1+1
0265  211A- 8E E1 14           STX MULTB
0266  211D- 18                 CLC
0267  211E- 6D E2 14           ADC MULTR
0268  2121- A6 01              LDX ACCU+1
0269  2123- 8E E0 14           STX MULTA
0270  2126- A6 1B              LDX ARG1
0271  2128- 8E E1 14           STX MULTB
0272  212B- 18                 CLC
0273  212C- 6D E2 14           ADC MULTR
0274  212F- 58                 CLI
0275  2130- 29 7F              AND =$7F
0276  2132- 85 01              STA ACCU+1
0277  2134- 20 E3 20           JSR DECS2
0278  2137- A5 10              LDA SIGN
0279  2139- 30 8A              BMI NEGA
0280  213B- 60                 RTS
0281                   *
0282  213C- A5 01      GETSIGN LDA ACCU+1
0283  213E- 85 10              STA SIGN
0284  2140- 10 03              BPL *+5
0285  2142- 20 C5 20           JSR NEGA
0286                   *
0287  2145- A0 7F              LDY =127
0288  2147- B1 08              LDA (SP),Y
0289  2149- 10 14              BPL GETSI1
0290  214B- 45 10              EOR SIGN
0291  214D- 85 10              STA SIGN
0292  214F- 88                 DEY

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 07

0293  2150- A9 00              LDA =0
0294  2152- 38                 SEC
0295  2153- F1 08              SBC (SP),Y
0296  2155- 85 1B              STA ARG1
0297  2157- C8                 INY
0298  2158- A9 00              LDA =0
0299  215A- F1 08              SBC (SP),Y
0300  215C- 85 1C              STA ARG1+1
0301  215E- 60                 RTS
0302                   *
0303  215F- 85 1C      GETSI1  STA ARG1+1
0304  2161- 88                 DEY
0305  2162- B1 08              LDA (SP),Y
0306  2164- 85 1B              STA ARG1
0307  2166- 60                 RTS
0308                   *
0309                   * PCODE 06: DIVA        (DIVIDE)
0310                   ****************
0311                   *
0312  2167- A0 7E      DIVA    LDY =126
0313  2169- B1 08              LDA (SP),Y
0314  216B- 85 1B              STA ARG1
0315  216D- C8                 INY
0316  216E- B1 08              LDA (SP),Y
0317  2170- 85 1C              STA ARG1+1
0318  2172- 20 E3 20           JSR DECS2
0319                   *
0320  2175- A5 1C              LDA ARG1+1
0321  2177- 29 80              AND =$80
0322  2179- F0 02              BEQ *+4
0323  217B- A9 FF              LDA =$FF
0324  217D- 85 21              STA ARG2
0325  217F- 85 22              STA ARG2+1
0326  2181- AA                 TAX
0327  2182- 18                 CLC
0328  2183- 65 1B              ADC ARG1
0329  2185- 85 1B              STA ARG1
0330  2187- 8A                 TXA
0331  2188- 65 1C              ADC ARG1+1
0332  218A- 85 1C              STA ARG1+1
0333  218C- 8A                 TXA
0334  218D- 45 01              EOR ACCU+1
0335  218F- 85 10              STA SIGN
0336  2191- 10 03              BPL *+5
0337  2193- 20 C5 20           JSR NEGA
0338  2196- A0 11              LDY =$11
0339  2198- A5 00              LDA ACCU
0340  219A- 05 01              ORA ACCU+1
0341  219C- D0 05              BNE DIV1
0342  219E- A2 31              LDX =$31        PASCAL RUNTIME ERROR

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 08

0343  21A0- 4C CA 28           JMP PERROR
0344                   *
0345  21A3- 38         DIV1    SEC
0346  21A4- A5 21              LDA ARG2
0347  21A6- E5 00              SBC ACCU
0348  21A8- 48                 PHA
0349  21A9- A5 22              LDA ARG2+1
0350  21AB- E5 01              SBC ACCU+1
0351  21AD- 48                 PHA
0352  21AE- 45 22              EOR ARG2+1
0353  21B0- 30 09              BMI DIV2
0354  21B2- 68                 PLA
0355  21B3- 85 22              STA ARG2+1
0356  21B5- 68                 PLA
0357  21B6- 85 21              STA ARG2
0358  21B8- 38                 SEC
0359  21B9- B0 03              BCS DIV3
0360                   *
0361  21BB- 68         DIV2    PLA
0362  21BC- 68                 PLA
0363  21BD- 18                 CLC
0364  21BE- 26 1B      DIV3    ROL ARG1
0365  21C0- 26 1C              ROL ARG1+1
0366  21C2- 26 21              ROL ARG2
0367  21C4- 26 22              ROL ARG2+1
0368  21C6- 88                 DEY
0369  21C7- D0 DA              BNE DIV1
0370  21C9- A5 1B              LDA ARG1
0371  21CB- A6 1C              LDX ARG1+1
0372  21CD- 85 00              STA ACCU
0373  21CF- 86 01              STX ACCU+1
0374  21D1- A5 10              LDA SIGN
0375  21D3- 10 03              BPL *+5
0376  21D5- 4C C5 20           JMP NEGA
0377  21D8- 60                 RTS
0378                   *
0379                   * P-CODE 07: LOWB       (LOW BIT)
0380                   *****************
0381                   * NO ARGUMENTS
0382                   *
0383  21D9- A5 00      LOWB    LDA ACCU
0384  21DB- 29 01              AND =1
0385  21DD- 85 00      LOWB1   STA ACCU
0386  21DF- A9 00              LDA =0
0387  21E1- 85 01              STA ACCU+1
0388  21E3- 60                 RTS
0389                   *
0390                   * P-CODE 08: TEQU       (TEST EQUAL)
0391                   *****************
0392                   *

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 09

0393  21E4- 20 EF 20   TEQU    JSR SUBA
0394  21E7- A5 00              LDA ACCU
0395  21E9- 05 01              ORA ACCU+1
0396  21EB- F0 04              BEQ TEQU1
0397  21ED- A9 00              LDA =0
0398  21EF- F0 EC              BEQ LOWB1       UNCOND.
0399                   *
0400  21F1- A9 01      TEQU1   LDA =1
0401  21F3- D0 E8              BNE LOWB1       UNCOND.
0402                   *
0403                   * PCODE 09: TNEQ        (TEST NOT EQUAL)
0404                   ****************
0405                   *
0406  21F5- 20 E4 21   TNEQ    JSR TEQU
0407  21F8- A5 00              LDA ACCU
0408  21FA- 49 01              EOR =1
0409  21FC- 85 00              STA ACCU
0410  21FE- 60                 RTS
0411                   *
0412                   * P-CODE 0A: TLES       (TEST LESS)
0413                   *****************
0414                   *
0415  21FF- 20 EF 20   TLES    JSR SUBA
0416  2202- A9 00              LDA =0
0417  2204- 06 01              ASL ACCU+1
0418  2206- 2A                 ROL A
0419  2207- 90 D4              BCC LOWB1       UNCOND.
0420                   *
0421                   * P-CODE 0B: TGRE       (TEST GREATER OR EQUAL)
0422                   *****************
0423                   *
0424  2209- 20 FF 21   TGRE    JSR TLES
0425  220C- 4C F8 21           JMP TNEQ+3
0426                   *
0427                   * P-CODE 0C: TGRTS      (TEST GREATER)
0428                   ******************
0429                   *
0430  220F- 20 E7 26   TGRT    JSR EXST
0431  2212- 4C FF 21           JMP TLES
0432                   *
0433                   * P-CODE 0D: TLEE       (TEST LESS OR EQUAL)
0434                   *****************
0435                   *
0436  2215- 20 0F 22   TLEE    JSR TGRT
0437  2218- 4C F8 21           JMP TNEQ+3
0438                   *
0439                   * P-CODE 0E: ORAC       (BITWISE OR)
0440                   *****************
0441                   *
0442  221B- A0 7E      ORAC    LDY =126

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 10

0443  221D- B1 08              LDA (SP),Y
0444  221F- 05 00              ORA ACCU
0445  2221- 85 00              STA ACCU
0446  2223- C8                 INY
0447  2224- B1 08              LDA (SP),Y
0448  2226- 05 01              ORA ACCU+1
0449  2228- 85 01              STA ACCU+1
0450  222A- 4C E3 20           JMP DECS2
0451                   *
0452                   * P-CODE 0F: ANDA       (BITWISE AND)
0453                   *****************
0454                   *
0455  222D- A0 7E      ANDA    LDY =126
0456  222F- B1 08              LDA (SP),Y
0457  2231- 25 00              AND ACCU
0458  2233- 85 00              STA ACCU
0459  2235- C8                 INY
0460  2236- B1 08              LDA (SP),Y
0461  2238- 25 01              AND ACCU+1
0462  223A- 85 01              STA ACCU+1
0463  223C- 4C E3 20           JMP DECS2
0464                   *
0465                   * PCODE 10: EORA        (BITWISE OR)
0466                   ****************
0467                   *
0468  223F- A0 7E      EORA    LDY =126
0469  2241- B1 08              LDA (SP),Y
0470  2243- 45 00              EOR ACCU
0471  2245- 85 00              STA ACCU
0472  2247- C8                 INY
0473  2248- B1 08              LDA (SP),Y
0474  224A- 45 01              EOR ACCU+1
0475  224C- 85 01              STA ACCU+1
0476  224E- 4C E3 20           JMP DECS2
0477                   *
0478                   * P-CODE 11: NOTA       (BITWISE NOT)
0479                   *****************
0480                   *
0481  2251- A5 00      NOTA    LDA ACCU
0482  2253- 49 FF              EOR =$FF
0483  2255- 85 00              STA ACCU
0484  2257- A5 01              LDA ACCU+1
0485  2259- 49 FF              EOR =$FF
0486  225B- 85 01              STA ACCU+1
0487  225D- 60                 RTS
0488                   *
0489                   * P-CODE 12: LEFT       (SHIFT LEFT N BYTES)
0490                   *****************
0491                   *
0492  225E- 20 C5 20           JSR NEGA

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 11

0493  2261- A5 01      LEFT    LDA ACCU+1
0494  2263- 30 12              BMI RIGH-3      ARGUMENT NEGATIVE
0495                   *
0496  2265- A6 00              LDX ACCU
0497  2267- F0 0B              BEQ LEFT2       TAKE ONLY LOW BYTE
0498  2269- 20 CF 22           JSR GETS2       GET SECOND NO FROM ST
0499  226C- 06 00      LEFT1   ASL ACCU
0500  226E- 26 01              ROL ACCU+1
0501  2270- CA                 DEX
0502  2271- D0 F9              BNE LEFT1
0503  2273- 60                 RTS
0504                   *
0505  2274- 4C CF 22   LEFT2   JMP GETS2
0506                   *
0507                   * P-CODE 13: RIGH       (SHIFT RIGHT N BYTES)
0508                   *****************
0509                   *
0510  2277- 20 C5 20           JSR NEGA
0511  227A- A5 01      RIGH    LDA ACCU+1
0512  227C- 30 E0              BMI LEFT-3
0513  227E- A6 00              LDX ACCU
0514  2280- F0 F2              BEQ LEFT2
0515  2282- 20 CF 22           JSR GETS2
0516  2285- 46 01      RIGH1   LSR ACCU+1
0517  2287- A9 00              LDA =0
0518  2289- 90 02              BCC *+4
0519  228B- A9 80              LDA =128
0520  228D- 46 00              LSR ACCU
0521  228F- 05 00              ORA ACCU
0522  2291- 85 00              STA ACCU
0523  2293- CA                 DEX
0524  2294- D0 EF              BNE RIGH1
0525  2296- 60                 RTS
0526                   *
0527                   * P-CODE 14:INCA        (INCREMENT ACCU)
0528                   ****************
0529                   *
0530  2297- E6 00      INCA    INC ACCU
0531  2299- D0 02              BNE *+4
0532  229B- E6 01              INC ACCU+1
0533  229D- 60                 RTS
0534                   *
0535                   * P-CODE 15: DECA       (DECREMENT ACCU)
0536                   *****************
0537                   *
0538  229E- A5 00      DECA    LDA ACCU
0539  22A0- D0 02              BNE *+4
0540  22A2- C6 01              DEC ACCU+1
0541  22A4- C6 00              DEC ACCU
0542  22A6- 60                 RTS

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 12

0543                   *
0544                   * P-CODE 16: COPY       (COPY ACCU0
0545                   *****************
0546                   *
0547  22A7- 20 B6 22   COPY    JSR INCS2       INCREMENT STACK
0548  22AA- A0 7E              LDY =126
0549  22AC- A5 00              LDA ACCU
0550  22AE- 91 08              STA (SP),Y
0551  22B0- C8                 INY
0552  22B1- A5 01              LDA ACCU+1
0553  22B3- 91 08              STA (SP),Y
0554  22B5- 60                 RTS
0555                   *
0556  22B6- A9 02      INCS2   LDA =2
0557  22B8- 18                 CLC
0558  22B9- 65 08              ADC SP
0559  22BB- 85 08              STA SP
0560  22BD- 90 02              BCC *+4
0561  22BF- E6 09              INC SP+1
0562  22C1- C5 0E      INCS2A  CMP ENDSTK      TEST STACK OVERFLOW
0563  22C3- A5 09              LDA SP+1
0564  22C5- E5 0F              SBC ENDSTK+1
0565  22C7- B0 01              BCS *+3
0566  22C9- 60                 RTS
0567                   *
0568  22CA- A0 32              LDY =$32        PASCAL RUN TIME ERROR
0569  22CC- 4C CA 28           JMP PERROR
0570                   *
0571                   * GETS2
0572                   *
0573  22CF- A0 7E      GETS2   LDY =126
0574  22D1- B1 08              LDA (SP),Y
0575  22D3- 85 00              STA ACCU
0576  22D5- C8                 INY
0577  22D6- B1 08              LDA (SP),Y
0578  22D8- 85 01              STA ACCU+1
0579  22DA- 4C E3 20           JMP DECS2
0580                   *
0581                   * P-CODE 17: PEEK
0582                   *****************
0583                   *
0584  22DD- A0 00      PEEK    LDY =0
0585  22DF- B1 00              LDA (ACCU),Y
0586  22E1- 85 00              STA ACCU
0587  22E3- 84 01              STY ACCU+1
0588  22E5- 60                 RTS
0589                   *
0590                   * P-CODE 18: POKE
0591                   *****************
0592                   *

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 13

0593  22E6- A6 00      POKE    LDX ACCU
0594  22E8- 20 CF 22           JSR GETS2
0595  22EB- A0 00              LDY =0
0596  22ED- 8A                 TXA
0597  22EE- 91 00              STA (ACCU),Y
0598  22F0- 4C CF 22           JMP GETS2
0599                   *
0600                   * P-CODE 19: CALA
0601                   *****************
0602                   *
0603  22F3- 20 F9 22   CALA    JSR CALA1
0604  22F6- 4C CF 22           JMP GETS2
0605                   *
0606  22F9- 6C 00 00   CALA1   JMP (ACCU)
0607                   *
0608                   * P-CODE 1A: RLIN
0609                   *****************
0610                   *
0611  22FC- 20 27 E0   RLIN    JSR PRTINF
0612  22FF- BF                 BYT '?'+128
0613  2300- 20 06 E0           JSR GETLIN
0614  2303- A2 00              LDX =0
0615  2305- B1 E9              LDA (VIDPNT),Y
0616  2307- 29 7F              AND =$7F
0617  2309- 95 24              STA LINBUF,X
0618  230B- E8                 INX
0619  230C- C8                 INY
0620  230D- CC 8A 17           CPY NUMCHR
0621  2310- 90 F3              BCC *-11
0622  2312- F0 F1              BEQ *-13
0623  2314- CA                 DEX
0624  2315- 30 06              BMI *+8
0625  2317- B5 24              LDA LINBUF,X
0626  2319- C9 20              CMP =$20
0627  231B- F0 F7              BEQ *-7
0628  231D- E8                 INX
0629  231E- 86 16              STX ENDBUF
0630  2320- A9 00              LDA =0
0631  2322- 85 15              STA BUFFPN
0632  2324- 20 27 E0           JSR PRTINF
0633  2327- 0D 8A              BYT $D,$8A
0634  2329- 60                 RTS
0635                   *
0636                   * P-CODE 1B: GETC
0637                   *****************
0638                   *
0639  232A- 20 A7 22   GETC    JSR COPY
0640  232D- 20 82 28           JSR GETCHR0
0641  2330- 85 00      GETC1   STA ACCU
0642  2332- A9 00              LDA =0

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 14

0643  2334- 85 01              STA ACCU+1
0644  2336- 60                 RTS
0645                   *
0646                   * P-CODE 1C: GETN
0647                   *****************
0648                   *
0649  2337- 20 A7 22   GETN    JSR COPY
0650  233A- A9 00              LDA =0
0651  233C- 85 00              STA ACCU
0652  233E- 85 01              STA ACCU+1
0653  2340- 85 10              STA SIGN
0654  2342- 20 82 28   GETN0   JSR GETCHR0
0655  2345- C9 20              CMP =' '
0656  2347- F0 F9              BEQ GETN0
0657  2349- C9 2D              CMP ='-'
0658  234B- D0 05              BNE GETN1
0659                   *
0660  234D- C6 10              DEC SIGN
0661  234F- 4C 56 23           JMP GETN2
0662                   *
0663  2352- C9 2B      GETN1    CMP ='+'
0664  2354- D0 03              BNE GETN2+3
0665                   *
0666  2356- 20 82 28   GETN2   JSR GETCHR0
0667  2359- C9 30              CMP ='0'
0668  235B- 90 2F              BCC GETN3
0669  235D- C9 3A              CMP ='9'+1
0670  235F- B0 2B              BCS GETN3
0671  2361- 38                 SEC
0672  2362- E9 30              SBC ='0'
0673  2364- 48                 PHA
0674  2365- 06 00              ASL ACCU
0675  2367- 26 01              ROL ACCU+1
0676  2369- A6 00              LDX ACCU
0677  236B- A4 01              LDY ACCU+1
0678  236D- 06 00              ASL ACCU
0679  236F- 26 01              ROL ACCU+1
0680  2371- 06 00              ASL ACCU
0681  2373- 26 01              ROL ACCU+1
0682  2375- 18                 CLC
0683  2376- 8A                 TXA
0684  2377- 65 00              ADC ACCU
0685  2379- 85 00              STA ACCU
0686  237B- 98                 TYA
0687  237C- 65 01              ADC ACCU+1
0688  237E- 85 01              STA ACCU+1
0689  2380- 68                 PLA
0690  2381- 18                 CLC
0691  2382- 65 00              ADC ACCU
0692  2384- 85 00              STA ACCU

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 15

0693  2386- 90 CE              BCC GETN2
0694  2388- E6 01              INC ACCU+1
0695  238A- B0 CA              BCS GETN2
0696                   *
0697  238C- A5 10      GETN3   LDA SIGN
0698  238E- F0 03              BEQ *+5
0699  2390- 4C C5 20           JMP NEGA
0700  2393- 60                 RTS
0701                   *
0702                   * P-CODE 1D: PRTC
0703                   *****************
0704                   *
0705  2394- A5 00      PRTC    LDA ACCU
0706  2396- 20 B2 28           JSR PRTCHR0
0707  2399- 4C CF 22           JMP GETS2
0708                   *
0709                   * P-CODE 1E: PRTN
0710                   *****************
0711                   *
0712  239C- A5 01      PRTN    LDA ACCU+1
0713  239E- 10 08              BPL PRTN1
0714  23A0- 20 C5 20           JSR NEGA
0715  23A3- A9 2D              LDA ='-'
0716  23A5- 20 B2 28           JSR PRTCHR0
0717                   *
0718  23A8- A5 00      PRTN1   LDA ACCU
0719  23AA- A6 01              LDX ACCU+1
0720  23AC- 85 21              STA ARG2
0721  23AE- 86 22              STX ARG2+1
0722  23B0- A9 1F              LDA =$1F
0723  23B2- 85 1D              STA ARG3
0724  23B4- 85 1F              STA ARG3+2
0725  23B6- A9 2A              LDA =$2A
0726  23B8- 85 1E              STA ARG3+1
0727  23BA- 85 20              STA ARG3+3
0728  23BC- A6 21              LDX ARG2
0729  23BE- A4 22              LDY ARG2+1
0730  23C0- 38                 SEC
0731  23C1- E6 1D      PRTN2   INC ARG3
0732  23C3- 8A                 TXA
0733  23C4- E9 10              SBC =$10
0734  23C6- AA                 TAX
0735  23C7- 98                 TYA
0736  23C8- E9 27              SBC =$27
0737  23CA- A8                 TAY
0738  23CB- B0 F4              BCS PRTN2
0739  23CD- C6 1E      PRTN3   DEC ARG3+1
0740  23CF- 8A                 TXA
0741  23D0- 69 E8              ADC =$E8
0742  23D2- AA                 TAX

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 16

0743  23D3- 98                 TYA
0744  23D4- 69 03              ADC =$03
0745  23D6- A8                 TAY
0746  23D7- 90 F4              BCC PRTN3
0747  23D9- 8A                 TXA
0748  23DA- 38         PRTN4   SEC
0749  23DB- E6 1F      PRTN5   INC ARG3+2
0750  23DD- E9 64              SBC =$64
0751  23DF- B0 FA              BCS PRTN5
0752  23E1- 88                 DEY
0753  23E2- 10 F6              BPL PRTN4
0754  23E4- C6 20      PRTN6   DEC ARG3+3
0755  23E6- 69 0A              ADC =$A
0756  23E8- 90 FA              BCC PRTN6
0757  23EA- 09 30              ORA =$30
0758  23EC- 85 21              STA ARG2
0759  23EE- A9 20              LDA =$20
0760  23F0- 85 22              STA ARG2+1
0761  23F2- A2 FB              LDX =$FB
0762  23F4- 86 10      PRTN7   STX SIGN
0763  23F6- B5 22              LDA ARG2+1,X
0764  23F8- 05 22              ORA ARG2+1
0765  23FA- C9 20              CMP =$20
0766  23FC- F0 09              BEQ PRTN8
0767  23FE- A0 30              LDY =$30
0768  2400- 84 22              STY ARG2+1
0769  2402- 05 22              ORA ARG2+1
0770  2404- 20 B2 28           JSR PRTCHR0
0771  2407- A6 10      PRTN8   LDX SIGN
0772  2409- E8                 INX
0773  240A- D0 E8              BNE PRTN7
0774  240C- 4C CF 22           JMP GETS2
0775                   *
0776                   * P-CODE 1F: PRTS
0777                   *****************
0778                   *
0779  240F- 06 00      PRTS    ASL ACCU
0780  2411- 26 01              ROL ACCU+1
0781  2413- A5 08              LDA SP
0782  2415- 38                 SEC
0783  2416- E5 00              SBC ACCU
0784  2418- 85 00              STA ACCU
0785  241A- 48                 PHA
0786  241B- A5 09              LDA SP+1
0787  241D- E5 01              SBC ACCU+1
0788  241F- 85 01              STA ACCU+1
0789  2421- 48                 PHA
0790  2422- A0 80      OUTST1  LDY =128
0791  2424- B1 00              LDA (ACCU),Y
0792  2426- 20 B2 28           JSR PRTCHR0

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 17

0793  2429- A5 00              LDA ACCU
0794  242B- 18                 CLC
0795  242C- 69 02              ADC =2
0796  242E- 85 00              STA ACCU
0797  2430- 90 02              BCC *+4
0798  2432- E6 01              INC ACCU+1
0799  2434- C5 08              CMP SP
0800  2436- A5 01              LDA ACCU+1
0801  2438- E5 09              SBC SP+1
0802  243A- 90 E6              BCC OUTST1
0803  243C- 68                 PLA
0804  243D- 85 09              STA SP+1
0805  243F- 68                 PLA
0806  2440- 85 08              STA SP
0807  2442- 4C CF 22           JMP GETS2
0808                   *
0809                   * P-CODE 20: LITB
0810                   *****************
0811                   *
0812  2445- 20 A7 22   LITB    JSR COPY
0813  2448- 20 8F 24           JSR FETCH
0814  244B- 85 00              STA ACCU
0815  244D- A9 00              LDA =0
0816  244F- 85 01              STA ACCU+1
0817  2451- 60                 RTS
0818                   *
0819                   * P-CODE 21: INCB
0820                   *****************
0821                   *
0822  2452- A0 80      INCB    LDY =128        SAVE CURRENT ACCU
0823  2454- A5 00              LDA ACCU
0824  2456- 91 08              STA (SP),Y
0825  2458- C8                 INY
0826  2459- A5 01              LDA ACCU+1
0827  245B- 91 08              STA (SP),Y
0828  245D- 20 8F 24           JSR FETCH
0829  2460- A2 00              LDX =0
0830  2462- A8                 TAY             TEST A
0831  2463- 10 01              BPL *+3
0832  2465- CA                 DEX
0833  2466- 18                 CLC
0834  2467- 65 08              ADC SP
0835  2469- 85 08              STA SP
0836  246B- 8A                 TXA
0837  246C- 65 09              ADC SP+1
0838  246E- 85 09              STA SP+1
0839  2470- A5 08      INCB1   LDA SP
0840  2472- 20 C1 22           JSR INCS2A      TEST STACK OVERFLOW
0841  2475- A0 80              LDY =128        AND GET NEW ACCU
0842  2477- B1 08              LDA (SP),Y

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 18

0843  2479- 85 00              STA ACCU
0844  247B- C8                 INY
0845  247C- B1 08              LDA (SP),Y
0846  247E- 85 01              STA ACCU+1
0847  2480- 60                 RTS
0848                   *
0849                   * P-CODE 22: LITW
0850                   *****************
0851                   *
0852  2481- 20 A7 22   LITW    JSR COPY
0853  2484- 20 8F 24           JSR FETCH
0854  2487- 85 00              STA ACCU
0855  2489- 20 8F 24           JSR FETCH
0856  248C- 85 01              STA ACCU+1
0857  248E- 60                 RTS
0858                   *
0859                   * FETCH
0860                   *
0861  248F- A0 00      FETCH   LDY =0
0862  2491- B1 0A              LDA (PC),Y
0863  2493- E6 0A              INC PC
0864  2495- D0 02              BNE *+4
0865  2497- E6 0B              INC PC+1
0866  2499- 60                 RTS
0867                   *
0868                   * P-CODE 23: INCW
0869                   *****************
0870                   *
0871  249A- A0 80      INCW    LDY =128        SAVE CURRENT ACCU
0872  249C- A5 00              LDA ACCU
0873  249E- 91 08              STA (SP),Y
0874  24A0- C8                 INY
0875  24A1- A5 01              LDA ACCU+1
0876  24A3- 91 08              STA (SP),Y
0877  24A5- 20 8F 24           JSR FETCH
0878  24A8- 18                 CLC
0879  24A9- 65 08              ADC SP
0880  24AB- 85 08              STA SP
0881  24AD- 20 8F 24           JSR FETCH
0882  24B0- 65 09              ADC SP+1
0883  24B2- 85 09              STA SP+1
0884  24B4- 4C 70 24           JMP INCB1
0885                   *
0886                   * P-CODE 24: JUMP
0887                   *****************
0888                   *
0889  24B7- A0 00      JUMP    LDY =0
0890  24B9- B1 0A              LDA (PC),Y
0891  24BB- 18                 CLC
0892  24BC- 65 0A              ADC PC

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 19

0893  24BE- AA                 TAX
0894  24BF- C8                 INY
0895  24C0- B1 0A              LDA (PC),Y
0896  24C2- 65 0B              ADC PC+1
0897  24C4- 86 0A              STX PC
0898  24C6- 85 0B              STA PC+1
0899  24C8- 60                 RTS
0900                   *
0901                   * P-CODE 25: JMPZ
0902                   *****************
0903                   *
0904  24C9- 46 00      JMPZ    LSR ACCU
0905  24CB- 08                 PHP
0906  24CC- 20 CF 22           JSR GETS2
0907  24CF- 28                 PLP
0908  24D0- 90 E5              BCC JUMP
0909                   *
0910  24D2- A5 0A              LDA PC
0911  24D4- 18                 CLC
0912  24D5- 69 02              ADC =2
0913  24D7- 85 0A              STA PC
0914  24D9- 90 02              BCC *+4
0915  24DB- E6 0B              INC PC+1
0916  24DD- 60                 RTS
0917                   *
0918                   * P-CODE 26: JMPO
0919                   *****************
0920                   *
0921  24DE- A5 00      JMPO    LDA ACCU
0922  24E0- 49 01              EOR =1
0923  24E2- 85 00              STA ACCU
0924  24E4- 4C C9 24           JMP JMPZ
0925                   *
0926                   * P-CODE 27: LOAD
0927                   *****************
0928                   *
0929  24E7- 20 A7 22   LOAD    JSR COPY
0930  24EA- 20 8F 24           JSR FETCH
0931  24ED- AA                 TAX             LEVEL DIFFERENCE
0932  24EE- 20 8F 24           JSR FETCH
0933  24F1- 85 1B              STA ARG1
0934  24F3- 20 8F 24           JSR FETCH
0935  24F6- 85 1C      LOAD1   STA ARG1+1
0936  24F8- 20 24 25           JSR FBASE3
0937  24FB- A0 80      LOAD2   LDY =128
0938  24FD- B1 19              LDA (ABASE),Y
0939  24FF- 85 00              STA ACCU
0940  2501- C8                 INY
0941  2502- B1 19              LDA (ABASE),Y
0942  2504- 85 01              STA ACCU+1

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 20

0943  2506- 60                 RTS
0944                   *
0945                   * FBASE
0946                   *
0947  2507- A5 17      FBASE   LDA BASE
0948  2509- A4 18              LDY BASE+1
0949  250B- 85 19              STA ABASE
0950  250D- 84 1A              STY ABASE+1
0951  250F- E0 00              CPX =0
0952  2511- F0 10              BEQ FBASE2
0953                   *
0954  2513- A0 80      FBASE1  LDY =128
0955  2515- B1 19              LDA (ABASE),Y
0956  2517- 48                 PHA
0957  2518- C8                 INY
0958  2519- B1 19              LDA (ABASE),Y
0959  251B- 85 1A              STA ABASE+1
0960  251D- 68                 PLA
0961  251E- 85 19              STA ABASE
0962  2520- CA                 DEX
0963  2521- D0 F0              BNE FBASE1
0964  2523- 60         FBASE2  RTS
0965                   *
0966  2524- 20 07 25   FBASE3  JSR FBASE
0967  2527- 18                 CLC
0968  2528- A5 1B              LDA ARG1
0969  252A- 65 19              ADC ABASE
0970  252C- 85 19              STA ABASE
0971  252E- A5 1C              LDA ARG1+1
0972  2530- 65 1A              ADC ABASE+1
0973  2532- 85 1A              STA ABASE+1
0974  2534- 60                 RTS
0975                   *
0976                   * P-CODE 28: LODX
0977                   *****************
0978                   *
0979  2535- 20 8F 24   LODX    JSR FETCH
0980  2538- AA                 TAX
0981  2539- 20 8F 24           JSR FETCH
0982  253C- 06 00              ASL ACCU
0983  253E- 26 01              ROL ACCU+1
0984  2540- 18                 CLC
0985  2541- 65 00              ADC ACCU
0986  2543- 85 1B              STA ARG1
0987  2545- 08                 PHP
0988  2546- 20 8F 24           JSR FETCH
0989  2549- 28                 PLP
0990  254A- 65 01              ADC ACCU+1
0991  254C- 4C F6 24           JMP LOAD1
0992                   *

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 21

0993                   * P-CODE 29: STOR
0994                   *****************
0995                   *
0996  254F- 20 8F 24   STOR    JSR FETCH
0997  2552- AA                 TAX
0998  2553- 20 8F 24           JSR FETCH
0999  2556- 85 1B              STA ARG1
1000  2558- 20 8F 24           JSR FETCH
1001  255B- 85 1C              STA ARG1+1
1002  255D- 20 24 25   STOR1   JSR FBASE3
1003  2560- A0 80      STOR2   LDY =128
1004  2562- A5 00              LDA ACCU
1005  2564- 91 19              STA (ABASE),Y
1006  2566- C8                 INY
1007  2567- A5 01              LDA ACCU+1
1008  2569- 91 19              STA (ABASE),Y
1009  256B- 4C CF 22           JMP GETS2
1010                   *
1011                   * P-CODE 2A: STOX
1012                   *****************
1013                   *
1014  256E- 20 8F 24   STOX    JSR FETCH
1015  2571- AA                 TAX
1016  2572- A0 7E              LDY =126
1017  2574- B1 08              LDA (SP),Y
1018  2576- 0A                 ASL A
1019  2577- 85 1B              STA ARG1
1020  2579- C8                 INY
1021  257A- B1 08              LDA (SP),Y
1022  257C- 2A                 ROL A
1023  257D- 85 1C              STA ARG1+1
1024  257F- 20 8F 24           JSR FETCH
1025  2582- 18                 CLC
1026  2583- 65 1B              ADC ARG1
1027  2585- 85 1B              STA ARG1
1028  2587- 20 8F 24           JSR FETCH
1029  258A- 65 1C              ADC ARG1+1
1030  258C- 85 1C              STA ARG1+1
1031  258E- 20 E3 20           JSR DECS2
1032  2591- 4C 5D 25           JMP STOR1
1033                   *
1034                   * P-CODE 2B: CALL
1035                   *****************
1036                   *
1037  2594- 20 8F 24   CALL    JSR FETCH
1038  2597- AA                 TAX
1039  2598- 20 07 25           JSR FBASE
1040  259B- A0 82              LDY =130
1041  259D- A5 19              LDA ABASE
1042  259F- 91 08              STA (SP),Y

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 22

1043  25A1- C8                 INY
1044  25A2- A5 1A              LDA ABASE+1
1045  25A4- 91 08              STA (SP),Y
1046  25A6- C8                 INY
1047  25A7- A5 17              LDA BASE
1048  25A9- 91 08              STA (SP),Y
1049  25AB- C8                 INY
1050  25AC- A5 18              LDA BASE+1
1051  25AE- 91 08              STA (SP),Y
1052  25B0- C8                 INY
1053  25B1- A5 0A              LDA PC
1054  25B3- 91 08              STA (SP),Y
1055  25B5- C8                 INY
1056  25B6- A5 0B              LDA PC+1
1057  25B8- 91 08              STA (SP),Y
1058  25BA- A5 08              LDA SP
1059  25BC- 18                 CLC
1060  25BD- 69 02              ADC =2
1061  25BF- 85 17              STA BASE
1062  25C1- A5 09              LDA SP+1
1063  25C3- 69 00              ADC =0
1064  25C5- 85 18              STA BASE+1
1065  25C7- 4C B7 24           JMP JUMP
1066                   *
1067                   * PCODE 2C: SDEV
1068                   ****************
1069                   *
1070  25CA- A5 00      SDEV    LDA ACCU
1071  25CC- 85 0D              STA DEVICE
1072  25CE- 4C CF 22           JMP GETS2
1073                   *
1074                   * PCODE 2D: RDEV
1075                   ****************
1076                   *
1077  25D1- A9 00      RDEV    LDA =0
1078  25D3- 85 0D              STA DEVICE
1079  25D5- 60                 RTS
1080                   *
1081                   * PCODE 2E: FNAM
1082                   ****************
1083                   *
1084  25D6- 20 27 E0   FNAM    JSR PRTINF
1085  25D9- 20 3D A0           BYT ' = '+128
1086  25DC- 20 06 E0           JSR GETLIN
1087  25DF- 20 15 F8           JSR GETNAM
1088  25E2- 20 0D 20           JSR HARGUM
1089  25E5- 85 DC              STA FILDRV
1090  25E7- 20 0D 20           JSR HARGUM
1091  25EA- 8D 13 03           STA FILLOC
1092  25ED- 20 27 E0           JSR PRTINF

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 23

1093  25F0- 0D 8A              BYT $D,$8A
1094  25F2- 60                 RTS
1095                   *
1096                   * P-CODE 2F: OPNR
1097                   *****************
1098                   *
1099                   * NO AUTOMATIC ERROR TESTING
1100                   *
1101  25F3- A9 00      OPNR    LDA =0
1102  25F5- 85 DA              STA FILFLG
1103  25F7- 20 A7 22           JSR COPY
1104  25FA- 20 0F F0           JSR OPEN
1105  25FD- C8                 INY
1106  25FE- C8                 INY
1107  25FF- 84 00              STY ACCU
1108  2601- 85 01              STA ACCU+1
1109  2603- 60                 RTS
1110                   *
1111                   * P-CODE 30: OPNW
1112                   *****************
1113                   *
1114  2604- A9 20      OPNW    LDA =$20
1115  2606- 4C F5 25           JMP OPNR+2
1116                   *
1117                   * P-CODE 31: CLOS
1118                   *****************
1119                   *
1120                   * NO AUTOMATIC ERROR CHECKING
1121                   *
1122  2609- A6 00      CLOS    LDX ACCU
1123  260B- CA                 DEX
1124  260C- CA                 DEX
1125  260D- 20 FE 2C           JSR CLOSRA
1126  2610- 4C CF 22           JMP GETS2
1127                   *
1128                   * P-CODE 32: PRTI
1129                   *****************
1130                   *
1131  2613- 20 8F 24   PRTI    JSR FETCH
1132  2616- 48                 PHA
1133  2617- 29 7F              AND =$7F
1134  2619- 20 B2 28           JSR PRTCHR0
1135  261C- 68                 PLA
1136  261D- 10 F4              BPL PRTI
1137  261F- 60                 RTS
1138                   *
1139                   * P-CODE 33: GHGH       (GET HIGH)
1140                   *****************
1141                   *
1142  2620- A5 01      GHGH    LDA ACCU+1

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 24

1143  2622- 85 00              STA ACCU
1144                   *
1145                   * P-CODE 34: GLOW
1146                   *****************
1147                   *
1148  2624- A9 00      GLOW    LDA =0
1149  2626- 85 01              STA ACCU+1
1150  2628- 60                 RTS
1151                   *
1152                   * P-CODE 35:PHGH
1153                   ****************
1154                   *
1155  2629- A0 7E      PHGH    LDY =126
1156  262B- B1 08              LDA (SP),Y
1157  262D- 85 01              STA ACCU+1
1158  262F- 4C E3 20           JMP DECS2
1159                   *
1160                   * P-CODE 36: PLOW
1161                   *****************
1162                   *
1163  2632- A0 7E      PLOW    LDY =126
1164  2634- B1 08              LDA (SP),Y
1165  2636- 85 00              STA ACCU
1166  2638- 4C E3 20           JMP DECS2
1167                   *
1168                   * P-CODE 37: GSEC
1169                   *****************
1170                   * DEVICE HAS TO BE SET  ########
1171                   *
1172  263B- 20 4D 26   GSEC    JSR PREPSEC
1173  263E- 4C 7A 20           JMP READ
1174  2641- 4C 86 20           JMP ENDDO
1175                   *
1176                   * P-CODE 38: PSEC
1177                   *****************
1178                   * DEVICE HAS TO BE SET  ########
1179                   *
1180  2644- 20 4D 26   PSEC    JSR PREPSEC
1181  2647- 20 7D 20           JSR WRITE
1182  264A- 4C 86 20           JMP ENDDO
1183                   *
1184  264D- EA         PREPSEC NOP             ########
1185  264E- EA                 NOP
1186  264F- EA                 NOP
1187  2650- EA                 NOP
1188  2651- A5 00              LDA ACCU
1189  2653- A6 01              LDX ACCU+1
1190  2655- 85 E0              STA DATA
1191  2657- 86 E1              STX DATA+1
1192  2659- A0 7E              LDY =126

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 25

1193  265B- B1 08              LDA (SP),Y
1194  265D- 85 DE              STA SECTOR
1195  265F- A0 7C              LDY =124
1196  2661- B1 08              LDA (SP),Y
1197  2663- 85 DD              STA TRACK
1198  2665- A5 08              LDA SP
1199  2667- 38                 SEC
1200  2668- E9 04              SBC =4
1201  266A- 20 E8 20           JSR DECS2+5
1202  266D- 20 CF 22           JSR GETS2
1203  2670- 4C 80 20           JMP PREPDO
1204                   *
1205                   * P-CODE 39: NBYT       LOAD N BYTES IMMEDIATELY
1206                   *****************
1207                   *
1208  2673- 20 8F 24   NBYT    JSR FETCH
1209  2676- AA                 TAX             BYTE COUNTER
1210  2677- 20 A7 22   NBYT1   JSR COPY
1211  267A- 20 8F 24           JSR FETCH
1212  267D- 84 01              STY ACCU+1      Y=0
1213  267F- 85 00              STA ACCU
1214  2681- CA                 DEX
1215  2682- D0 F3              BNE NBYT1
1216  2684- 60                 RTS
1217                   *
1218                   * P-CODE 3A: NWRD       LOAD N WORD IMMEDIATELY
1219                   *****************
1220                   *
1221  2685- 20 8F 24   NWRD    JSR FETCH
1222  2688- AA                 TAX             WORD COUNTER
1223  2689- 20 A7 22   NWRD1   JSR COPY
1224  268C- 20 8F 24           JSR FETCH
1225  268F- 85 00              STA ACCU
1226  2691- 20 8F 24           JSR FETCH
1227  2694- 85 01              STA ACCU+1
1228  2696- CA                 DEX
1229  2697- D0 F0              BNE NWRD1
1230  2699- 60                 RTS
1231                   *
1232                   * P-CODE 3B: LODN       LOAD N MORE WORDS
1233                   *****************
1234                   *
1235  269A- 20 8F 24   LODN    JSR FETCH
1236  269D- AA                 TAX
1237  269E- 20 A7 22   LODN1   JSR COPY
1238  26A1- A5 19              LDA ABASE
1239  26A3- 18                 CLC
1240  26A4- 69 02              ADC =2
1241  26A6- 85 19              STA ABASE
1242  26A8- 90 02              BCC *+4

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 26

1243  26AA- E6 1A              INC ABASE+1
1244  26AC- 20 FB 24           JSR LOAD2
1245  26AF- CA                 DEX
1246  26B0- D0 EC              BNE LODN1
1247  26B2- 60                 RTS
1248                   *
1249                   * P-CODE 3C: STON       STORE N MORE WORDS
1250                   *****************
1251                   *
1252  26B3- 20 8F 24   STON    JSR FETCH
1253  26B6- AA                 TAX
1254  26B7- A5 19      STON1   LDA ABASE
1255  26B9- 38                 SEC
1256  26BA- E9 02              SBC =2
1257  26BC- 85 19              STA ABASE
1258  26BE- B0 02              BCS *+4
1259  26C0- C6 1A              DEC ABASE+1
1260  26C2- 20 60 25           JSR STOR2
1261  26C5- CA                 DEX
1262  26C6- D0 EF              BNE STON1
1263  26C8- 60                 RTS
1264                   *
1265                   * P-CODE 3D: LODI       LOAD INDIRECT
1266                   *****************
1267                   *
1268  26C9- 20 CF 26   LODI    JSR GETACC
1269  26CC- 4C FB 24           JMP LOAD2
1270                   *
1271  26CF- A5 00      GETACC  LDA ACCU
1272  26D1- A6 01              LDX ACCU+1
1273  26D3- 38                 SEC
1274  26D4- E9 80              SBC =128
1275  26D6- B0 01              BCS *+3
1276  26D8- CA                 DEX
1277  26D9- 85 19              STA ABASE
1278  26DB- 86 1A              STX ABASE+1
1279  26DD- 60                 RTS
1280                   *
1281                   * P-CODE 3E: STOI       STORE INDIRECT
1282                   *****************
1283                   *
1284  26DE- 20 CF 26   STOI    JSR GETACC
1285  26E1- 20 CF 22           JSR GETS2
1286  26E4- 4C 60 25           JMP STOR2
1287                   *
1288                   * P-CODE 3F: EXST       EXCHANGE STACK
1289                   *****************
1290                   *
1291  26E7- A0 7E      EXST    LDY =126
1292  26E9- B1 08              LDA (SP),Y

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 27

1293  26EB- AA                 TAX
1294  26EC- A5 00              LDA ACCU
1295  26EE- 91 08              STA (SP),Y
1296  26F0- 86 00              STX ACCU
1297  26F2- C8                 INY
1298  26F3- B1 08              LDA (SP),Y
1299  26F5- AA                 TAX
1300  26F6- A5 01              LDA ACCU+1
1301  26F8- 91 08              STA (SP),Y
1302  26FA- 86 01              STX ACCU+1
1303  26FC- 60                 RTS
1304                   *
1305                   * P-CODE 40 TIND        TEST INDEX
1306                   ****************
1307                   *
1308  26FD- 20 8F 24   TIND    JSR FETCH       LOWLIM-1
1309  2700- AA                 TAX
1310  2701- 20 8F 24           JSR FETCH
1311  2704- E4 00              CPX ACCU
1312  2706- E5 01              SBC ACCU+1
1313  2708- 70 0E              BVS TINDERR
1314                   *
1315  270A- 20 8F 24           JSR FETCH       HIGHLIM
1316  270D- AA                 TAX
1317  270E- 20 8F 24           JSR FETCH
1318  2711- E4 00              CPX ACCU
1319  2713- E5 01              SBC ACCU+1
1320  2715- 90 01              BCC TINDERR
1321  2717- 60                 RTS
1322                   *
1323  2718- A2 35      TINDERR LDX =$35        RUNTIME ERROR
1324  271A- 4C CA 28           JMP PERROR
1325                   *
1326                   * P-CODE 41: RUNP       RUN PROGRAM
1327                   *****************
1328                   *
1329  271D- A0 82      RUNP    LDY =130
1330  271F- A5 00              LDA ACCU        SAVE ACCU
1331  2721- A6 01              LDX ACCU+1
1332  2723- 20 4F 27           JSR SAVE
1333  2726- A5 17              LDA BASE        SAVE BASE
1334  2728- A6 18              LDX BASE+1
1335  272A- 20 4F 27           JSR SAVE
1336  272D- A5 0A              LDA PC          SAVE PC
1337  272F- A6 0B              LDX PC+1
1338  2731- 20 4F 27           JSR SAVE
1339  2734- A5 11              LDA STPROG      SAVE STPROG
1340  2736- A6 12              LDX STPROG+1
1341  2738- 20 4F 27           JSR SAVE
1342  273B- A5 13              LDA EOPROG      SAVE EOPROG

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 28

1343  273D- A6 14              LDX EOPROG+1
1344  273F- 20 4F 27           JSR SAVE
1345  2742- A5 08              LDA SP          GET SP
1346  2744- A6 09              LDX SP+1
1347  2746- 18                 CLC
1348  2747- 69 8C              ADC =140
1349  2749- 90 01              BCC *+3
1350  274B- E8                 INX             COMPUTE NEW STPROG
1351  274C- 4C 43 29           JMP EXEC3
1352                   *
1353                   *
1354  274F- 91 08      SAVE    STA (SP),Y
1355  2751- C8                 INY
1356  2752- 8A                 TXA
1357  2753- 91 08              STA (SP),Y
1358  2755- C8                 INY
1359  2756- 60                 RTS
1360                   *
1361                   *
1362  2757- 88         GETBACK DEY
1363  2758- B1 08              LDA (SP),Y
1364  275A- AA                 TAX
1365  275B- 88                 DEY
1366  275C- B1 08              LDA (SP),Y
1367  275E- 60                 RTS
1368                   *
1369                   *
1370                   * P-CODE 42: ADDF
1371                   *****************
1372                   *
1373  275F- 20 7C 27   ADDF    JSR GETFLP2
1374  2762- 20 EE 2A           JSR FADD
1375                   *
1376  2765- A5 08      PUTFLP0 LDA SP          DECREMENT SP BY 4
1377  2767- 38                 SEC
1378  2768- E9 04              SBC =4
1379  276A- 85 08              STA SP
1380  276C- B0 02              BCS PUTFLP
1381  276E- C6 09              DEC SP+1
1382  2770- A5 02      PUTFLP  LDA M1+1        AND SAVE HALF OF NUMBER
1383  2772- A0 7E              LDY =126
1384  2774- 91 08              STA (SP),Y
1385  2776- C8                 INY
1386  2777- A5 03              LDA M1+2
1387  2779- 91 08              STA (SP),Y
1388  277B- 60                 RTS
1389                   *
1390  277C- A0 7A      GETFLP2 LDY =122        GET SECOND NUMBER
1391  277E- B1 08              LDA (SP),Y
1392  2780- 85 1D              STA M2+1

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 29

1393  2782- C8                 INY
1394  2783- B1 08              LDA (SP),Y
1395  2785- 85 1E              STA M2+2
1396  2787- C8                 INY
1397  2788- B1 08              LDA (SP),Y
1398  278A- 85 1B              STA X2
1399  278C- C8                 INY
1400  278D- B1 08              LDA (SP),Y
1401  278F- 85 1C              STA M2
1402  2791- A0 7E      GETFLP  LDY =126        AND HALF OF FIRST
1403  2793- B1 08              LDA (SP),Y
1404  2795- 85 02              STA M1+1
1405  2797- C8                 INY
1406  2798- B1 08              LDA (SP),Y
1407  279A- 85 03              STA M1+2
1408  279C- 60                 RTS
1409                   *
1410                   * P-CODE 43: SUBF
1411                   *****************
1412                   *
1413  279D- 20 7C 27   SUBF    JSR GETFLP2
1414  27A0- 20 E8 2A           JSR FSUB
1415  27A3- 4C 65 27           JMP PUTFLP0
1416                   *
1417                   * P-CODE 44: MULF
1418                   *****************
1419                   *
1420  27A6- 20 7C 27   MULF    JSR GETFLP2
1421  27A9- 20 15 2B           JSR FMUL
1422  27AC- 4C 65 27           JMP PUTFLP0
1423                   *
1424                   * P-CODE 45: DIVF
1425                   *****************
1426                   *
1427  27AF- 20 7C 27   DIVF    JSR GETFLP2
1428  27B2- 20 3B 2B           JSR FDIV
1429  27B5- 4C 65 27           JMP PUTFLP0
1430                   *
1431                   * P-CODE 46: FLOF
1432                   *****************
1433                   *
1434  27B8- A5 00      FLOF    LDA ACCU
1435  27BA- 85 02              STA M1+1        HIGH BYTE IS IN ACCU
1436                   *                       SAME AS M1
1437  27BC- 20 CA 2A           JSR FLOAT
1438  27BF- 20 B6 22           JSR INCS2
1439  27C2- 4C 70 27           JMP PUTFLP
1440                   *
1441                   * P-CODE 47: FIXF
1442                   *****************

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 30

1443                   *
1444  27C5- 20 91 27   FIXF    JSR GETFLP
1445  27C8- 20 88 2B           JSR FIX
1446  27CB- A5 02              LDA M1+1
1447  27CD- 85 00              STA ACCU
1448  27CF- 4C E3 20           JMP DECS2
1449                   *
1450                   * P-CODE 48: FEQU       =
1451                   *****************
1452                   *
1453  27D2- 20 EA 27   FEQU    JSR TESTF
1454  27D5- F0 09              BEQ TRUE
1455                   *
1456  27D7- A2 00      FALSE   LDX =0
1457  27D9- 86 00              STX ACCU
1458  27DB- 86 01              STX ACCU+1
1459  27DD- 4C E3 20           JMP DECS2
1460                   *
1461  27E0- A2 01      TRUE    LDX =1
1462  27E2- 86 00              STX ACCU
1463  27E4- CA                 DEX
1464  27E5- 86 01              STX ACCU+1
1465  27E7- 4C E3 20           JMP DECS2
1466                   *
1467  27EA- 20 7C 27   TESTF   JSR GETFLP2
1468  27ED- 20 E8 2A           JSR FSUB
1469  27F0- A5 01              LDA M1
1470  27F2- 60                 RTS
1471                   *
1472                   * P-CODE 49: FNEQ       <>
1473                   *****************
1474                   *
1475  27F3- 20 EA 27   FNEQ    JSR TESTF
1476  27F6- D0 E8              BNE TRUE
1477  27F8- F0 DD              BEQ FALSE
1478                   *
1479                   * P-CODE 4A: FLES       <
1480                   *****************
1481                   *
1482  27FA- 20 EA 27   FLES    JSR TESTF
1483  27FD- 10 D8              BPL FALSE
1484  27FF- 30 DF              BMI TRUE
1485                   *
1486                   * P-CODE 4B: FGRE       >=
1487                   *****************
1488                   *
1489  2801- 20 EA 27   FGRE    JSR TESTF
1490  2804- 10 DA              BPL TRUE
1491  2806- 30 CF              BMI FALSE
1492                   *

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 31

1493                   * P-CODE 4C: FGRT       >
1494                   *****************
1495                   *
1496  2808- 20 EA 27   FGRT    JSR TESTF
1497  280B- 30 CA              BMI FALSE
1498  280D- F0 C8              BEQ FALSE
1499  280F- 10 CF              BPL TRUE
1500                   *
1501                   * P-CODE 4D: FLEE       <=
1502                   *****************
1503                   *
1504  2811- 20 EA 27   FLEE    JSR TESTF
1505  2814- 30 CA              BMI TRUE
1506  2816- F0 C8              BEQ TRUE
1507  2818- 10 BD              BPL FALSE
1508                   *
1509                   * P-CODE 4E: FCOM       COMPLEMENT
1510                   *****************
1511                   *
1512  281A- 20 91 27   FCOM    JSR GETFLP
1513  281D- 20 2D 2B           JSR FCOMPL
1514  2820- 4C 70 27           JMP PUTFLP
1515                   *
1516                   *
1517                   * P-CODE 4F: TFER       TEST FILE ERROR
1518                   *****************
1519                   *
1520  2823- A6 23      TFER    LDX IOCHECK
1521  2825- F0 04              BEQ TFER1
1522  2827- A6 DB              LDX FILERR
1523  2829- D0 01              BNE TFER2
1524  282B- 60         TFER1   RTS             OK
1525                   *
1526  282C- 4C CA 28   TFER2   JMP PERROR
1527                   *
1528                   * P-CODE 50: OPRA       OPEN RA-FILE
1529                   *****************
1530                   *
1531  282F- 20 A7 22   OPRA    JSR COPY        SAVE ACCU
1532  2832- 20 8F 2B           JSR OPENRA      OPEN FILE
1533  2835- C8                 INY
1534  2836- C8                 INY
1535  2837- 84 00              STY ACCU        SAVE FILE NO
1536  2839- A9 00              LDA =0
1537  283B- 85 01              STA ACCU+1
1538  283D- 60                 RTS
1539                   *
1540                   * P-CODE 51: GETR       GET FROM RA FILE
1541                   *****************
1542                   *

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 32

1543                   * NO AUTOMATIC ERROR CHECKING
1544                   *
1545  283E- 20 4B 28   GETR    JSR GETR1
1546  2841- 20 96 2C           JSR GETBYTE
1547  2844- 85 00              STA ACCU
1548  2846- A9 00              LDA =0
1549  2848- 85 01              STA ACCU+1
1550  284A- 60                 RTS
1551                   *
1552  284B- 20 E3 20   GETR1   JSR DECS2
1553  284E- A0 80              LDY =128
1554  2850- B1 08              LDA (SP),Y      GET FILE NO
1555  2852- AA                 TAX
1556  2853- CA                 DEX
1557  2854- CA                 DEX
1558  2855- A5 00              LDA ACCU        GET POINTER
1559  2857- A4 01              LDY ACCU+1
1560  2859- 60                 RTS
1561                   *
1562                   * P-CODE 52: PUTR       PUT TO RA=FILE
1563                   *****************
1564                   *
1565                   * NO AUTOMATIC ERROR CHECLING
1566                   *
1567  285A- A5 00      PUTR    LDA ACCU
1568  285C- 85 FE              STA KCHAR
1569  285E- 20 E3 20           JSR DECS2
1570  2861- 20 4B 28           JSR GETR1
1571  2864- 20 B4 2C           JSR PUTBYTE
1572  2867- 4C CF 22           JMP GETS2
1573                   *
1574                   * P-CODE 53: SWA2       SWAP 2 AND 3 ON STACK
1575                   *****************
1576                   *
1577  286A- A0 7E      SWA2    LDY =126
1578  286C- 20 71 28           JSR SWA3
1579  286F- A0 7F              LDY =127
1580                   *
1581  2871- B1 08      SWA3    LDA (SP),Y
1582  2873- AA                 TAX
1583  2874- 88                 DEY
1584  2875- 88                 DEY
1585  2876- B1 08              LDA (SP),Y
1586  2878- C8                 INY
1587  2879- C8                 INY
1588  287A- 91 08              STA (SP),Y
1589  287C- 8A                 TXA
1590  287D- 88                 DEY
1591  287E- 88                 DEY
1592  287F- 91 08              STA (SP),Y

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 33

1593  2881- 60                 RTS
1594                   *
1595                   * GETCHR0: GET A CHAR FROM SPECIFIED FILE
1596                   *****************************************
1597                   *
1598  2882- A6 0D      GETCHR0 LDX DEVICE
1599  2884- D0 1A              BNE GETCHR4
1600                   *
1601  2886- A6 15      GETCHR1 LDX BUFFPN
1602  2888- 10 06              BPL GETCHR2
1603  288A- 20 FC 22           JSR RLIN
1604  288D- 4C 86 28           JMP GETCHR1
1605                   *
1606  2890- E4 16      GETCHR2 CPX ENDBUF      IS IS END OF BUFFER?
1607  2892- D0 07              BNE GETCHR3
1608  2894- A9 FF              LDA =$FF
1609  2896- 85 15              STA BUFFPN
1610  2898- A9 0D              LDA =$D
1611  289A- 60                 RTS
1612                   *
1613  289B- E6 15      GETCHR3 INC BUFFPN
1614  289D- B5 24              LDA LINBUF,X
1615  289F- 60                 RTS
1616                   *
1617  28A0- CA         GETCHR4 DEX
1618  28A1- D0 03              BNE GETCHR5     SKIP, IF NOT KEY
1619  28A3- 4C 00 E0           JMP GETKEY
1620                   *
1621  28A6- CA         GETCHR5 DEX
1622  28A7- A9 00              LDA =0
1623  28A9- 85 DA              STA FILFLG
1624  28AB- 20 18 F0           JSR READCH
1625  28AE- 4C 23 28           JMP TFER
1626                   *
1627  28B1- 60         GETCHR6 RTS
1628                   *
1629                   * PRTCHR0: PRINT CHAR TO SPECIFIED FILE
1630                   ***************************************
1631                   *
1632  28B2- A6 0D      PRTCHR0 LDX DEVICE
1633  28B4- D0 03              BNE PRTCHR1
1634  28B6- 4C 09 E0           JMP PRTCHR
1635                   *
1636  28B9- CA         PRTCHR1 DEX
1637  28BA- D0 03              BNE PRTCHR2
1638  28BC- 4C 0C E0           JMP AUTOPR
1639                   *
1640  28BF- CA         PRTCHR2 DEX
1641  28C0- A0 00              LDY =0
1642  28C2- 84 DA              STY FILFLG

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 34

1643  28C4- 20 1B F0           JSR WRITCH
1644  28C7- 4C 23 28           JMP TFER
1645                   *
1646                   *
1647                   * PERROR: PASCAL RUNTIME ERROR
1648                   ******************************
1649                   *
1650  28CA- 20 27 E0   PERROR  JSR PRTINF
1651  28CD- 0D 0A 07           BYT $D,$A,7,'pascal error '+128
1651  28D0- 70 61 73 
1651  28D3- 63 61 6C 
1651  28D6- 20 65 72 
1651  28D9- 72 6F 72 
1651  28DC- A0 
1652  28DD- A9 00              LDA =0
1653  28DF- 85 0D              STA DEVICE
1654  28E1- 8A                 TXA
1655  28E2- 85 0C              STA RUNERR
1656  28E4- 20 2D E0           JSR PRTBYT
1657  28E7- A5 0A              LDA PC
1658  28E9- 38                 SEC
1659  28EA- E5 11              SBC STPROG
1660  28EC- 85 00              STA ACCU
1661  28EE- A5 0B              LDA PC+1
1662  28F0- E5 12              SBC STPROG+1
1663  28F2- 85 01              STA ACCU+1
1664  28F4- F0 0C              BEQ PERROR1
1665  28F6- 30 0A              BMI PERROR1
1666  28F8- 20 27 E0           JSR PRTINF
1667  28FB- 20 61 74           BYT ' at '+128
1667  28FE- A0 
1668  28FF- 20 9C 23           JSR PRTN
1669                   *
1670  2902- 20 10 20   PERROR1 JMP STOP
1671                   *
1672                   *
1673                   * WARM START ENTRY POINT
1674                   ************************
1675                   *
1676  2905- A2 00      WARMST  LDX =0
1677  2907- 86 0B              STX PC+1
1678  2909- 86 0D              STX DEVICE
1679  290B- CA                 DEX
1680  290C- 86 16              STX ENDBUF
1681  290E- 86 23              STX IOCHECK
1682  2910- A2 00              LDX =0
1683                   *
1684  2912- A0 00      EXEC    LDY =0
1685  2914- 84 0B              STY PC+1
1686  2916- BD CD 29           LDA EXTABLE,X

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 35

1687  2919- 9D 20 03           STA FILNM1,X
1688  291C- E8                 INX
1689  291D- C8                 INY
1690  291E- C0 10              CPY =16
1691  2920- 90 F2              BCC EXEC+2
1692  2922- A9 00              LDA =0
1693  2924- 8D 30 03           STA FILCY1
1694  2927- 85 DC              STA FILDRV
1695                   *
1696  2929- A9 00      EXECUTE LDA =0
1697  292B- 85 DA              STA FILFLG
1698  292D- AD 0B 20           LDA USEREND
1699  2930- AE 0C 20           LDX USEREND+1
1700  2933- 38                 SEC
1701  2934- E9 90              SBC =144
1702  2936- B0 01              BCS *+3
1703  2938- CA                 DEX
1704  2939- 85 0E              STA ENDSTK
1705  293B- 86 0F              STX ENDSTK+1
1706                   *
1707  293D- AD 09 20   EXEC1   LDA USERST
1708  2940- AE 0A 20           LDX USERST+1
1709  2943- 85 11      EXEC3   STA STPROG
1710  2945- 86 12              STX STPROG+1
1711  2947- 8D 31 03           STA FILSA1
1712  294A- 8D 32 03           STA FILSA1+1
1713  294D- 20 15 E8           JSR RDFILE      READ FILE TO EXECUTE
1714  2950- F0 04              BEQ EXEC2
1715  2952- AA                 TAX             PASCAL RUNTIME ERROR
1716  2953- 4C CA 28           JMP PERROR
1717                   *
1718  2956- 20 27 E0   EXEC2   JSR PRTINF
1719  2959- 0D 8A              BYT $D,$8A
1720  295B- AD 12 03           LDA FILSTP
1721  295E- C9 50              CMP ='P'        MUST BE PASCAL PROGRAM
1722  2960- F0 05              BEQ RUN
1723  2962- A2 33              LDX =$33        PASCAL RUNTIME ERROR
1724  2964- 4C CA 28           JMP PERROR
1725                   *
1726  2967- A0 00      RUN     LDY =0          READ END ADDRESS
1727  2969- B1 11              LDA (STPROG),Y  FROM FILE
1728  296B- 18                 CLC
1729  296C- 65 11              ADC STPROG
1730  296E- 85 13              STA EOPROG
1731  2970- C8                 INY
1732  2971- B1 11              LDA (STPROG),Y
1733  2973- 65 12              ADC STPROG+1
1734  2975- 85 14              STA EOPROG+1
1735  2977- A5 13              LDA EOPROG      GET END OF STACK
1736  2979- A6 14              LDX EOPROG+1

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 36

1737  297B- 38                 SEC
1738  297C- E9 80              SBC =128
1739  297E- 85 17              STA BASE
1740  2980- 85 08              STA SP
1741  2982- B0 01              BCS *+3
1742  2984- CA                 DEX
1743  2985- 86 18              STX BASE+1
1744  2987- 86 09              STX SP+1
1745                   *
1746  2989- A5 11              LDA STPROG
1747  298B- A6 12              LDX STPROG+1
1748  298D- 18                 CLC
1749  298E- 69 02              ADC =2
1750  2990- 85 0A              STA PC
1751  2992- 90 01              BCC *+3
1752  2994- E8                 INX
1753  2995- 86 0B              STX PC+1
1754  2997- A9 00              LDA =0
1755  2999- 85 0C              STA RUNERR
1756  299B- 20 A6 29   LOOP    JSR EXCODE
1757  299E- AD 81 17           LDA SFLAG
1758  29A1- 30 20              BMI ESCERR
1759  29A3- 4C 9B 29           JMP LOOP
1760                   *
1761                   *
1762  29A6- 20 8F 24   EXCODE  JSR FETCH
1763  29A9- 89 F1              STA =$F1
1764  29AB- C9 54              CMP =$54        TEST CODENUMBER
1765  29AD- 90 05              BCC *+7
1766  29AF- A9 34      ILLC    LDA =$34        PASCAL RUNTIME ERROR
1767  29B1- 4C CA 28           JMP PERROR      UNKNOWN P-CODE
1768                   *
1769  29B4- 0A                 ASL A
1770  29B5- AA                 TAX
1771  29B6- BD DD 29           LDA TABLE,X
1772  29B9- 85 1B              STA ARG1
1773  29BB- BD DE 29           LDA TABLE+1,X
1774  29BE- 85 1C              STA ARG1+1
1775  29C0- 6C 1B 00           JMP (ARG1)
1776                   *
1777  29C3- A9 00      ESCERR  LDA =0
1778  29C5- 8D 81 17           STA SFLAG
1779  29C8- A2 36              LDX =$36        PASCAL RUNTIME ERROR
1780  29CA- 4C CA 28           JMP PERROR      ESCAPE DUNRING EXECUTION
1781                   *
1782  29CD- 53 59 53   EXTABLE BYT 'SYSTEM:R        '
1782  29D0- 54 45 4D 
1782  29D3- 3A 52 20 
1782  29D6- 20 20 20 
1782  29D9- 20 20 20 

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 37

1782  29DC- 20 
1783                   *
1784  29DD- 10 20 92   TABLE   WRD STOP,RETN,NEGA,ADDA,SUBA,MULA
1784  29E0- 20 C5 20 
1784  29E3- D3 20 EF 
1784  29E6- 20 02 21 
1785  29E9- 67 21 D9           WRD DIVA,LOWB,TEQU,TNEQ,TLES,TGRE
1785  29EC- 21 E4 21 
1785  29EF- F5 21 FF 
1785  29F2- 21 09 22 
1786  29F5- 0F 22 15           WRD TGRT,TLEE,ORAC,ANDA,EORA,NOTA
1786  29F8- 22 1B 22 
1786  29FB- 2D 22 3F 
1786  29FE- 22 51 22 
1787  2A01- 61 22 7A           WRD LEFT,RIGH,INCA,DECA,COPY,PEEK
1787  2A04- 22 97 22 
1787  2A07- 9E 22 A7 
1787  2A0A- 22 DD 22 
1788  2A0D- E6 22 F3           WRD POKE,CALA,RLIN,GETC,GETN,PRTC
1788  2A10- 22 FC 22 
1788  2A13- 2A 23 37 
1788  2A16- 23 94 23 
1789  2A19- 9C 23 0F           WRD PRTN,PRTS,LITB,INCB,LITW,INCW
1789  2A1C- 24 45 24 
1789  2A1F- 52 24 81 
1789  2A22- 24 9A 24 
1790  2A25- B7 24 C9           WRD JUMP,JMPZ,JMPO,LOAD,LODX,STOR
1790  2A28- 24 DE 24 
1790  2A2B- E7 24 35 
1790  2A2E- 25 4F 25 
1791  2A31- 6E 25 94           WRD STOX,CALL,SDEV,RDEV,FNAM,OPNR
1791  2A34- 25 CA 25 
1791  2A37- D1 25 D6 
1791  2A3A- 25 F3 25 
1792  2A3D- 04 26 09           WRD OPNW,CLOS,PRTI,GHGH,GLOW,PHGH
1792  2A40- 26 13 26 
1792  2A43- 20 26 24 
1792  2A46- 26 29 26 
1793  2A49- 32 26 3B           WRD PLOW,GSEC,PSEC,NBYT,NWRD,LODN
1793  2A4C- 26 44 26 
1793  2A4F- 73 26 85 
1793  2A52- 26 9A 26 
1794  2A55- B3 26 C9           WRD STON,LODI,STOI,EXST,TIND,RUNP
1794  2A58- 26 DE 26 
1794  2A5B- E7 26 FD 
1794  2A5E- 26 1D 27 
1795  2A61- 5F 27 9D           WRD ADDF,SUBF,MULF,DIVF,FLOF,FIXF
1795  2A64- 27 A6 27 
1795  2A67- AF 27 B8 
1795  2A6A- 27 C5 27 

----------------------------------------------------------------------

R65 PASCAL RUNTIME                 01/06/82   R65 ASSEMBLER  PAGE 38

1796  2A6D- D2 27 F3           WRD FEQU,FNEQ,FLES,FGRE,FGRT,FLEE
1796  2A70- 27 FA 27 
1796  2A73- 01 28 08 
1796  2A76- 28 11 28 
1797  2A79- 1A 28 23           WRD FCOM,TFER,OPRA,GETR,PUTR,SWA2
1797  2A7C- 28 2F 28 
1797  2A7F- 3E 28 5A 
1797  2A82- 28 6A 28 
1798                   *
1799                   * COLDSTART
1800                   ***********
1801                   *
1802  2A85- 58         COLDST  CLI
1803  2A86- D8                 CLD
1804  2A87- AD 09 20           LDA USERST
1805  2A8A- AE 0A 20           LDX USERST+1
1806  2A8D- 85 11              STA STPROG
1807  2A8F- A6 12              LDX STPROG+1
1808  2A91- A0 00              LDY =0
1809  2A93- 98                 TYA
1810  2A94- 91 11              STA (STPROG),Y
1811  2A96- C8                 INY
1812  2A97- C0 04              CPY =4
1813  2A99- 90 F9              BCC *-5
1814  2A9B- 4C 05 29           JMP WARMST
1815                   *
1816                           TIT R65 PASCAL: FLP-MATH
1817                           PAG

----------------------------------------------------------------------

R65 PASCAL: FLP-MATH               01/06/82   R65 ASSEMBLER  PAGE 39

1818                   *
1819                   ********************************
1820                   * R65 PASCAL FLP MATH ROUTINES *
1821                   ********************************
1822                   *
1823                   *
1824  2A9E- 18         ADD     CLC
1825  2A9F- A2 02              LDX =2
1826  2AA1- B5 01      ADD1    LDA M1,X
1827  2AA3- 75 1C              ADC M2,X
1828  2AA5- 95 01              STA M1,X
1829  2AA7- CA                 DEX
1830  2AA8- 10 F7              BPL ADD1
1831  2AAA- 60                 RTS
1832                   *
1833  2AAB- 06 10      MD1     ASL SIGN
1834  2AAD- 20 B0 2A           JSR ABSWAP
1835  2AB0- 24 01      ABSWAP  BIT M1
1836  2AB2- 10 05              BPL ABSWP1
1837  2AB4- 20 2D 2B           JSR FCOMPL
1838  2AB7- E6 10              INC SIGN
1839  2AB9- 38         ABSWP1  SEC
1840                   *
1841                   * SWAP: EXCHANGE F1 AND F2
1842                   **************************
1843                   *
1844  2ABA- A2 04      SWAP    LDX =4
1845  2ABC- 94 03      SWAP1   STY E-1,X
1846  2ABE- B5 FF              LDA <(X1-1),X
1847  2AC0- B4 1A              LDY X2-1,X
1848  2AC2- 94 FF              STY <(X1-1),X
1849  2AC4- 95 1A              STA X2-1,X
1850  2AC6- CA                 DEX
1851  2AC7- D0 F3              BNE SWAP1
1852  2AC9- 60                 RTS
1853                   *
1854                   * FLOAT: FLOAT M1,M1+1 TO RESULT IN F1
1855                   **************************************
1856                   *
1857  2ACA- A9 8E      FLOAT   LDA =$8E
1858  2ACC- 85 00              STA X1
1859  2ACE- A9 00              LDA =0
1860  2AD0- 85 03              STA M1+2
1861  2AD2- F0 08              BEQ NORM
1862  2AD4- C6 00      NORM1   DEC X1
1863  2AD6- 06 03              ASL M1+2
1864  2AD8- 26 02              ROL M1+1
1865  2ADA- 26 01              ROL M1
1866  2ADC- A5 01      NORM    LDA M1
1867  2ADE- 0A                 ASL A

----------------------------------------------------------------------

R65 PASCAL: FLP-MATH               01/06/82   R65 ASSEMBLER  PAGE 40

1868  2ADF- 45 01              EOR M1
1869  2AE1- 30 04              BMI RTS1
1870  2AE3- A5 00              LDA X1
1871  2AE5- D0 ED              BNE NORM1
1872  2AE7- 60         RTS1    RTS
1873                   *
1874                   * FSUB: F1=F2-F1
1875                   ****************
1876                   *
1877  2AE8- 20 2D 2B   FSUB    JSR FCOMPL
1878  2AEB- 20 FB 2A   SWPALG  JSR ALGNSW
1879                   *
1880                   * FADD: F1=F2+F1
1881                   ****************
1882                   *
1883  2AEE- A5 1B      FADD    LDA X2
1884  2AF0- C5 00              CMP X1
1885  2AF2- D0 F7              BNE SWPALG
1886  2AF4- 20 9E 2A           JSR ADD
1887  2AF7- 50 E3      ADDEND  BVC NORM
1888  2AF9- 70 05              BVS RTLOG
1889  2AFB- 90 BD      ALGNSW  BCC SWAP
1890  2AFD- A5 01      RTAR    LDA M1
1891  2AFF- 0A                 ASL A
1892  2B00- E6 00      RTLOG   INC X1
1893  2B02- F0 7E              BEQ OVFL
1894  2B04- A2 FA      RTLOG1  LDX =$FA
1895  2B06- A9 80      ROR1    LDA =$80
1896  2B08- B0 01              BCS ROR2
1897  2B0A- 0A                 ASL A
1898  2B0B- 56 07      ROR2    LSR E+3,X
1899  2B0D- 15 07              ORA E+3,X
1900  2B0F- 95 07              STA E+3,X
1901  2B11- E8                 INX
1902  2B12- D0 F2              BNE ROR1
1903  2B14- 60                 RTS
1904                   *
1905                   * FMUL: F1=F2*F1
1906                   ****************
1907                   *
1908  2B15- 20 AB 2A   FMUL    JSR MD1
1909  2B18- 65 00              ADC X1
1910  2B1A- 20 6B 2B           JSR MD2
1911  2B1D- 18                 CLC
1912  2B1E- 20 04 2B   MUL1    JSR RTLOG1
1913  2B21- 90 03              BCC MUL2
1914  2B23- 20 9E 2A           JSR ADD
1915  2B26- 88         MUL2    DEY
1916  2B27- 10 F5              BPL MUL1
1917  2B29- 46 10      MDEND   LSR SIGN

----------------------------------------------------------------------

R65 PASCAL: FLP-MATH               01/06/82   R65 ASSEMBLER  PAGE 41

1918  2B2B- 90 AF      NORMX   BCC NORM
1919  2B2D- 38         FCOMPL  SEC
1920  2B2E- A2 03              LDX =3
1921  2B30- A9 00      COMPL1  LDA =0
1922  2B32- F5 00              SBC X1,X
1923  2B34- 95 00              STA X1,X
1924  2B36- CA                 DEX
1925  2B37- D0 F7              BNE COMPL1
1926  2B39- F0 BC              BEQ ADDEND
1927                   *
1928                   * FDIV: F1=F2/F1
1929                   ****************
1930                   *
1931  2B3B- 20 AB 2A   FDIV    JSR MD1
1932  2B3E- E5 00              SBC X1
1933  2B40- 20 6B 2B           JSR MD2
1934  2B43- 38         FDIV1   SEC
1935  2B44- A2 02              LDX =2
1936  2B46- B5 1C      FDIV2   LDA M2,X
1937  2B48- F5 04              SBC E,X
1938  2B4A- 48                 PHA
1939  2B4B- CA                 DEX
1940  2B4C- 10 F8              BPL FDIV2
1941  2B4E- A2 FD              LDX =$FD
1942  2B50- 68         FDIV3   PLA
1943  2B51- 90 02              BCC FDIV4
1944  2B53- 95 1F              STA M2+3,X
1945  2B55- E8         FDIV4   INX
1946  2B56- D0 F8              BNE FDIV3
1947  2B58- 26 03              ROL M1+2
1948  2B5A- 26 02              ROL M1+1
1949  2B5C- 26 01              ROL M1
1950  2B5E- 06 1E              ASL M2+2
1951  2B60- 26 1D              ROL M2+1
1952  2B62- 26 1C              ROL M2
1953  2B64- B0 1C              BCS OVFL
1954  2B66- 88                 DEY
1955  2B67- D0 DA              BNE FDIV1
1956  2B69- F0 BE              BEQ MDEND
1957  2B6B- 86 03      MD2     STX M1+2
1958  2B6D- 86 02              STX M1+1
1959  2B6F- 86 01              STX M1
1960  2B71- B0 0D              BCS OVCHK
1961  2B73- 30 04              BMI MD3
1962  2B75- 68                 PLA
1963  2B76- 68                 PLA
1964  2B77- 90 B2              BCC NORMX
1965  2B79- 49 80      MD3     EOR =$80
1966  2B7B- 85 00              STA X1
1967  2B7D- A0 17              LDY =$17

----------------------------------------------------------------------

R65 PASCAL: FLP-MATH               01/06/82   R65 ASSEMBLER  PAGE 42

1968  2B7F- 60                 RTS
1969  2B80- 10 F7      OVCHK   BPL MD3
1970  2B82- 4C 9E 21   OVFL    JMP DIV1-5      PASCAL RUNTIME ERROR
1971                   *
1972                   * FIX: FIX F1 IN M1, M1+1
1973                   *************************
1974                   *
1975  2B85- 20 FD 2A           JSR RTAR
1976  2B88- A5 00      FIX     LDA X1
1977  2B8A- C9 8E              CMP =$8E
1978  2B8C- D0 F7              BNE FIX-3
1979  2B8E- 60         RTRN    RTS
1980                   *
1981                           TIT R65 PASCAL: RANDOM ACCESS
1982                           PAG

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 43

1983                   *
1984                   * RANDOM ACCESS FILE HANDLER
1985                   ****************************
1986                   *
1987                   *
1988                   * OPENRA: OPEN A FILE FOR RANDOM ACCESS
1989                   ***************************************
1990                   *
1991                   * ENTRY: FILNM1,FILCY1,FILDRV,FILFLG
1992                   * FILFLG: BIT 7: PROTECTED (NEW ONLY)*
1993                   *         BIT 6: NO PRINTED OUTPUT
1994                   *         BIT 5: DIRECTION (0=READ)
1995                   *         BIT 4: 1=NEW, 0=OLD
1996                   *
1997                   * NEW ONLY: MAXSIZ,FILSA
1998                   *
1999                   * EXIT: NO OF OPEN FILE IN Y, STATUS IN A
2000                   *       AND FILERR, Y IS ONLY VALID
2001                   *       IF A=0
2002                   *
2003                   *
2004  2B8F- AC 36 03   OPENRA  LDY MAXSEQ      SEARCH EMPTY ENTRY
2005  2B92- B9 39 03           LDA FIDRTB,Y    BIT 5=1: ENTRY USED
2006  2B95- 29 20              AND =$20
2007  2B97- F0 08              BEQ OPENRA1     FOUND, SKIP
2008  2B99- 88                 DEY
2009  2B9A- 10 F6              BPL OPENRA+3
2010                   *
2011  2B9C- A9 23              LDA =$23        TOO MANY OPEN FILES
2012  2B9E- 85 DB              STA FILERR
2013  2BA0- 60                 RTS
2014                   *
2015  2BA1- 8C 35 03   OPENRA1 STY CURSEQ      SAVE CURRENT ENTRY NO
2016  2BA4- A5 DC              LDA FILDRV      GET AND TEST DRIVE
2017  2BA6- 99 41 03           STA FIDVTB,Y
2018  2BA9- 29 FE              AND =$FE
2019  2BAB- F0 05              BEQ OPENRA2     SKIP, IF OK
2020                   *
2021  2BAD- A9 28              LDA =$28        ILLEGAL DRIVE FOR RA
2022  2BAF- 85 DB              STA FILERR
2023  2BB1- 60                 RTS
2024                   *
2025  2BB2- A9 10      OPENRA2 LDA =$10        TEST OLD/NEW FLAG
2026  2BB4- 25 DA              AND FILFLG
2027  2BB6- F0 78              BEQ OPENOLD     SKIP, IF OLF
2028                   *
2029                   * OPEN A NEW FILE
2030                   *
2031  2BB8- A5 DA      OPENNEW LDA FILFLG
2032  2BBA- 29 80              AND =$80        GET PROTECTED FLAG

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 44

2033  2BBC- 09 42              ORA ='B'        BLOCK FILE
2034  2BBE- 8D 00 03           STA FILTYP      SET FILE TYPE
2035                   *
2036  2BC1- A9 00              LDA =0
2037  2BC3- AD 37 03           LDA MAXSIZ      SIZE OF FILE
2038  2BC6- 8D 15 03           STA FILSIZ
2039  2BC9- 8E 16 03           STX FILSIZ+1
2040                   *
2041  2BCC- CA                 DEX             COMPUTE FILEA
2042  2BCD- AD 1A 03           LDA FILSA
2043  2BD0- 18                 CLC
2044  2BD1- 69 FF              ADC =$FF
2045  2BD3- 8D 1C 03           STA FILEA
2046  2BD6- 8A                 TXA
2047  2BD7- 6D 1B 03           ADC FILSA+1
2048  2BDA- 8D 1D 03           STA FILEA+1
2049                   *
2050  2BDD- 20 1E E8           JSR SETFID      SET FILEDATE
2051                   *
2052  2BE0- A2 10              LDX =16
2053  2BE2- BD 20 03   OPENNE1 LDA FILNM1,X    SET FILNM1 AND FILCY1
2054  2BE5- 9D 01 03           STA FILNAM,X    TO FILNAM AND FILCYC
2055  2BE8- CA                 DEX
2056  2BE9- 10 F7              BPL OPENNE1
2057                   *
2058                   * SEARCH IN DIRECTORY AND RETURN CYCLUS
2059                   * AND DIRECTORY ENTRY TO USE, TEST EXISTING
2060                   * FILES FOR SAME NAME AND CYCLUS, DISK
2061                   * OPERATION IS INITIALIZED
2062                   *
2063  2BEB- 20 8C 20           JSR PREPWRA
2064  2BEE- 8E 11 03           STX FILCYC
2065                   *
2066                   * FIND FIRST EMPTY DISK DIRECTORY ENTR
2067                   * FETCH ITAND SET FIRST SECTOR OF FILE TO
2068                   * FILLOC, OUTPUT Y,X AS NUMBER OF EMPTY
2069                   * SECTORS
2070                   *
2071  2BF1- 20 8F 20           JSR PREPWRB
2072  2BF4- 8A                 TXA
2073  2BF5- CD 16 03           CMP FILSIZ+1
2074  2BF8- 98                 TYA
2075  2BF9- E9 00              SBC =0          COMPARE WITH REQUESTED
2076  2BFB- B0 05              BCS OPENNE3     SECTORS
2077                   *
2078  2BFD- A9 26              LDA =$26        DISK OVERFLOW
2079  2BFF- 4C 83 20           JMP DISCER1
2080                   *
2081                   * SET FITEMP,Y AND FITEMP+8,YNTO FIRST SECTOT
2082                   * OF FILE ON DISK, FIMAXT,Y TO SIZE, DIRECTORY

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 45

2083                   * ENTRY NO TO FITEMP+16,Y
2084                   * THEN PUT THIS ENTRY ONTO THE DISKMAND SET
2085                   * A NEW END OF DIRECTORY MARK
2086                   *
2087  2C02- 20 68 20   OPENNE3 JSR DOPEN4
2088                   *
2089  2C05- AC 35 03           LDY CURSEQ      SETUP DUMMY FIRST SECTOR
2090  2C08- A9 00              LDA =0
2091  2C0A- 99 49 03           STA FIBPTB,Y
2092  2C0D- 99 51 03           STA FIRCTB,Y
2093                   *
2094  2C10- AC 35 03   OPENNE4 LDY CURSEQ      OPEN FILE
2095  2C13- A5 DA              LDA FILFLG
2096  2C15- 0A                 ASL A
2097  2C16- 0A                 ASL A
2098  2C17- 29 80              AND =$80        GET DIRECTION
2099  2C19- 48                 PHA
2100  2C1A- 2D 00 03           AND FILTYP
2101  2C1D- F0 06              BEQ OPENNE5     OK, SKIP
2102  2C1F- 68                 PLA             PROTECTED FILE
2103                   *
2104  2C20- A9 29              LDA =$29
2105  2C22- 85 DB              STA FILERR
2106  2C24- 60                 RTS
2107                   *
2108  2C25- 68         OPENNE5 PLA
2109  2C26- 09 60              ORA =$60        RA FILE, OPENIT
2110  2C28- 99 39 03           STA FIDRTB,Y
2111                   *
2112  2C2B- A9 00              LDA =0          NORMALEXIT
2113  2C2D- 85 DB              STA FILERR
2114  2C2F- 60         OPENNE6 RTS
2115                   *
2116                   * OPEN AN OLD FILE:
2117                   * PREPARE DISK OPERATION, SEARCH REQUESTED
2118                   * FILE AND GET CORRSPONDING DISK ENTRY
2119                   *
2120  2C30- 20 89 20   OPENOLD JSR PREPRD
2121                   *
2122  2C33- 20 6B 20           JSR PRFLB1      PRINT LABEL, IF REQ.
2123  2C36- AD 00 03           LDA FILTYP
2124  2C39- 29 7F              AND =$7F
2125  2C3B- C9 42              CMP ='B'        MUST BE BLOCK FILE
2126  2C3D- F0 05              BEQ OPENOL1     SKIP, IF OK
2127                   *
2128  2C3F- A9 05              LDA =5
2129  2C41- 4C 83 20           JMP DISCER1     FILE TYPE ERROR
2130                   *
2131  2C44- 20 86 20   OPENOL1 JSR ENDDO       END OF DISK OPERATION
2132                   *

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 46

2133                   * SET NOW FIRST SECTOR AND SIZE TO TABLE
2134                   *
2135  2C47- 20 65 20           JSR DOPEN1
2136                   *
2137  2C4A- A9 00              LDA =0          GET FIRST RECORD
2138  2C4C- 20 53 2C           JSR GETTREC
2139  2C4F- D0 DE              BNE OPENNE6     SKIP, IF NOT OK
2140  2C51- F0 BD              BEQ OPENNE4     ELSE OPEN FILE
2141                   *
2142                   *
2143                   * GETTREC: GET ONE RECORD FROM RA-FILE
2144                   * RECORD NUMBER IS IN A, FILE NUMBER IN CURSEQ
2145                   * RESULT IUS Z=1,OF OK, ELSE Z=0 AND FILERR
2146                   *
2147  2C53- AE 35 03   GETTREC LDX CURSEQ      SAVE RECORD NO
2148  2C56- 9D 51 03           STA FIRCTB,X
2149  2C59- A9 00              LDA =0          CLEAR UPDATED FLAG
2150  2C5B- 9D 49 03           STA FIBPTB,X
2151  2C5E- BD 41 03           LDA FIDVTB,X    SET DRIVE NO
2152  2C61- 85 DC              STA FILDRV
2153                   *
2154                   * COMPUTE DATA-POINTER AND BINARY
2155                   * TRACK,SECTOR, SETUP FILDRV
2156                   *
2157  2C63- 20 71 20           JSR PREPSR
2158                   *
2159                   * ADD RECORD NUMBER TO BINARY TRAC/SECTOR
2160                   * TEST SIZE OF FILE, CONVERT TO TRACK AND
2161                   * SECTOR, INITIALIZE DISK OPERATION
2162                   *
2163  2C66- 20 74 20           JSR PREPSR1
2164                   *
2165  2C69- 20 7A 20           JSR READ        READ ON SECTOR
2166                   *
2167  2C6C- 4C 86 20           JMP ENDDO       END OF DISK OPERATION
2168                   *
2169                   * PUTTREC: SAVE CURRENT RECORD ON DISK
2170                   * FILE NUMBER IN CURSEQ, RECORD NUMBER IN
2171                   * FIRCTB,Y, RETURNS Z=1 IF OK, ELSE FILERR
2172                   *
2173  2C6F- BD 41 03   PUTTREC LDA FIDVTB,X
2174  2C72- 85 DC              STA FILDRV
2175  2C74- 20 71 20           JSR PREPSR      SEE GETTREC FOR
2176  2C77- 20 74 20           JSR PREPSR1     COMMENTS
2177  2C7A- 20 7D 20           JSR WRITE
2178  2C7D- 4C 86 20           JMP ENDDO
2179                   *
2180                   * GETNEWR: GET A NEW RECORD, SAVE OLD, IF
2181                   * OLD HAS BEEN UPDATED
2182                   * ENTRY: NEW RECORD IN A, FILE NO IN CURSEQ

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 47

2183                   * EXIT: z=1 IF OK, ELSE FILERR
2184                   *
2185  2C80- 8D 34 03   GETNEWR STA SAVRST+1    SAVE REQUESTED RECORD
2186  2C83- AE 35 03           LDX CURSEQ
2187  2C86- BD 49 03           LDA FIBPTB,X    UPDATED?
2188  2C89- 10 05              BPL GETNEW1
2189                   *
2190  2C8B- 20 6F 2C           JSR PUTTREC     YES, SAVE IT
2191  2C8E- D0 23              BNE EXIT
2192                   *
2193  2C90- AD 34 03   GETNEW1 LDA SAVRST+1    GET REQUESTED RECORD
2194  2C93- 4C 53 2C           JMP GETTREC
2195                   *
2196                   * GETBYTE: GET ONE BYTE FROM FILE
2197                   *********************************
2198                   * ENTRY: FILE NUMBER IN X
2199                   *        POINTER IN A(LOW) AND Y(HIGH)
2200                   * EXIT:  FILERR IN Y AND STATUS, BYTE IN A
2201                   *
2202  2C96- 8D 33 03   GETBYTE STA SAVRST      SAVE A
2203  2C99- 20 E3 2C           JSR TESTRA
2204                   *
2205  2C9C- 98                 TYA
2206  2C9D- DD 51 03           CMP FIRCTB,X    IS IT IN CURRENT RECORD?
2207  2CA0- F0 05              BEQ GETBYT1     YES, SKIP
2208                   *
2209  2CA2- 20 80 2C           JSR GETNEWR     NO, GET NEW RECORD
2210  2CA5- D0 0C              BNE EXIT
2211                   *
2212  2CA7- 20 6E 20   GETBYT1 JSR CPOINT      COMPUTE BUFFER PNT
2213  2CAA- AC 33 03           LDY SAVRST      RESTORE LOW POINTER
2214  2CAD- B1 FA              LDA (POINT),Y   GET THE BYTE
2215  2CAF- A0 00              LDY =0
2216  2CB1- 84 DB              STY FILERR      OK
2217  2CB3- 60         EXIT    RTS
2218                   *
2219                   * PUTBYTE: PUT ONE BYTE TO FILE
2220                   *******************************
2221                   *
2222                   * ENTRY: BYTE STORED IN KCHAR
2223                   *        FILE NUMBER IN X
2224                   *        POINTER IN A(LOW) AND Y(HIGH)
2225                   * EXIT:  FILERR IN Y AND STATUS
2226                   *
2227  2CB4- 8D 33 03   PUTBYTE STA SAVRST
2228  2CB7- 20 E3 2C           JSR TESTRA
2229  2CBA- BD 39 03           LDA FIDRTB,X    IS WRITE ALLOWED?
2230  2CBD- 10 05              BPL PUTBYT0     YES,SKIP
2231  2CBF- A0 29              LDY =$29        WRITE NOT ALLOWED
2232  2CC1- 84 DB              STY FILERR

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 48

2233  2CC3- 60                 RTS
2234                   *
2235  2CC4- 98         PUTBYT0 TYA             FOR COMMENTS
2236  2CC5- DD 51 03           CMP FIRCTB,X    SEE GETBYTE
2237  2CC8- F0 05              BEQ PUTBYT1
2238                   *
2239  2CCA- 20 80 2C           JSR GETNEWR
2240  2CCD- D0 E4              BNE EXIT
2241                   *
2242  2CCF- 20 6E 20   PUTBYT1 JSR CPOINT
2243  2CD2- A9 80              LDA =$80        SET UPDATED FLAG
2244  2CD4- 9D 49 03           STA FIBPTB,X
2245  2CD7- AC 33 03           LDY SAVRST
2246  2CDA- A5 FE              LDA KCHAR       GET BACK KCHAR
2247  2CDC- 91 FA              STA (POINT),Y
2248  2CDE- A0 00              LDY =0
2249  2CE0- 84 DB              STY FILERR
2250  2CE2- 60                 RTS
2251                   *
2252                   *
2253                   * TESTRA: TEST X FOR LEGAL RA-FILE
2254                   *
2255  2CE3- 8E 35 03   TESTRA  STX CURSEQ
2256  2CE6- EC 36 03           CPX MAXSEQ
2257  2CE9- B0 0A              BCS TESTRA2
2258                   *
2259  2CEB- BD 39 03   TESTRA1 LDA FIDRTB,X
2260  2CEE- 29 60              AND =$60
2261  2CF0- C9 60              CMP =$60
2262  2CF2- D0 03              BNE TESTRA3     SKIP, IF NOT OK
2263  2CF4- 60                 RTS
2264                   *
2265  2CF5- F0 F4      TESTRA2 BEQ TESTRA1
2266  2CF7- 68         TESTRA3 PLA
2267  2CF8- 68                 PLA
2268  2CF9- A0 25              LDY =$25        FILE NUMBER NOT ALLOWED
2269  2CFB- 84 DB              STY FILERR
2270  2CFD- 60                 RTS
2271                   *
2272                   * CLOSRA: CLOSE RA OR SEQUENTIAL FILE IN X
2273                   ******************************************
2274                   * ENTRY: FILE IN X
2275                   * EXIT: FILERR IN Y AND STATUS
2276                   *
2277  2CFE- BD 39 03   CLOSRA  LDA FIDRTB,X
2278  2D01- 29 40              AND =$40        SEQUENTIAL FILE?
2279  2D03- D0 03              BNE CLOSRA1     NO, SKIP
2280  2D05- 4C 77 20           JMP CLOSE       YES, CLOSE IT
2281                   *
2282  2D08- 20 E3 2C   CLOSRA1 JSR TESTRA      MUST BE RA-FILE

----------------------------------------------------------------------

R65 PASCAL: RANDOM ACCESS          01/06/82   R65 ASSEMBLER  PAGE 49

2283  2D0B- BD 49 03           LDA FIBPTB,X    UPDATED?
2284  2D0E- F0 05              BEQ CLOSRA2     NO, SKIP
2285                   *
2286  2D10- 20 6F 2C           JSR PUTTREC
2287  2D13- D0 0B              BNE CLOSRA3
2288                   *
2289  2D15- AE 35 03   CLOSRA2 LDX CURSEQ
2290  2D18- A9 00              LDA =0
2291  2D1A- 9D 39 03           STA FIDRTB,X    CLOSE IT
2292  2D1D- A8                 TAY
2293  2D1E- 84 DB              STY FILERR
2294  2D20- 60         CLOSRA3 RTS
2295                   *
2296                   ENDCODE EQU *
2297                   *
2298                           TIT R65 PASCAL: LABELS
2299                   *
2300  2D21-                    END
LABELS=014A
ERRORS=00
RECORDS=70

---------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 50

CROSS REFERENCE MAP:

ABASE    0019    24FD 2502 250B 250D 2515 2519 251B 251E 252A 252C 2530 
                 2532 2564 2569 259D 25A2 26A1 26A6 26AA 26B7 26BC 26C0 
                 26D9 26DB 
ABSWAP   2AB0    2AAD 
ABSWP1   2AB9    2AB2 
ACCU     0000    0004 0004 205E 2060 20A3 20A8 20C8 20CA 20CE 20D0 20D8 
                 20DA 20DF 20E1 20F4 20F6 20FB 20FD 2105 2113 2121 2132 
                 213C 218D 2198 219A 21A6 21AB 21CD 21CF 21D9 21DD 21E1 
                 21E7 21E9 21F8 21FC 2204 221F 2221 2226 2228 2231 2233 
                 2238 223A 2243 2245 224A 224C 2251 2255 2257 225B 2261 
                 2265 226C 226E 227A 227E 2285 228D 228F 2291 2297 229B 
                 229E 22A2 22A4 22AC 22B1 22D3 22D8 22DF 22E1 22E3 22E6 
                 22EE 22F9 2330 2334 233C 233E 2365 2367 2369 236B 236D 
                 236F 2371 2373 2377 2379 237C 237E 2382 2384 2388 2394 
                 239C 23A8 23AA 240F 2411 2416 2418 241D 241F 2424 2429 
                 242E 2432 2436 244B 244F 2454 2459 2479 247E 2487 248C 
                 249C 24A1 24C9 24DE 24E2 24FF 
ADD      2A9E    2AF4 2B23 
ADDA     20D3    29DD 
ADDEND   2AF7    2B39 
ADDF     275F    2A61 
ADD1     2AA1    2AA8 
ALGNSW   2AFB    2AEB 
ANDA     222D    29F5 
ARG1     001B    0023 0023 210B 2118 2126 2155 215C 215F 2164 216B 2170 
                 2175 2183 2185 2188 218A 21BE 21C0 21C9 21CB 24F1 24F6 
                 2528 252E 2543 2556 255B 2577 257D 2583 2585 258A 258C 
                 29B9 29BE 29C0 
ARG2     0021    217D 217F 21A4 21A9 21AE 21B3 21B6 21C2 21C4 23AC 23AE 
                 23BC 23BE 23EC 23F0 23F6 23F8 2400 2402 
ARG3     001D    23B2 23B4 23B8 23BA 23C1 23CD 23DB 23E4 
AUTOPR   E00C    28BC 
BASE     0017    2057 2059 2092 2099 20AE 20B3 2507 2509 25A7 25AC 25BF 
                 25C5 2726 2728 297E 2985 
BUFFPN   0015    2322 2886 2896 289B 
CALA     22F3    2A0D 
CALA1    22F9    22F3 
CALL     2594    2A31 
CLOS     2609    2A3D 
CLOSE    2077    2D05 
CLOSRA   2CFE    260D 
CLOSRA1  2D08    2D03 
CLOSRA2  2D15    2D0E 
CLOSRA3  2D20    2D13 
COLDST   2A85    2000 
COMPL1   2B30    2B37 
COPY     22A7    232A 2337 2445 2481 24E7 25F7 2677 2689 269E 282F 2A01 
CPOINT   206E    2CA7 2CCF 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 51

CURSEQ   0335    2BA1 2C05 2C10 2C53 2C83 2CE3 2D15 
DATA     00E0    2655 2657 
DECA     229E    2A01 
DECS2    20E3    20FF 2134 2172 222A 223C 224E 22DA 258E 262F 2638 266A 
                 27CF 27DD 27E7 284B 285E 
DEVICE   000D    25CC 25D3 2882 28B2 28DF 2909 
DISCER1  2083    2BFF 2C41 
DIVA     2167    29E9 
DIVF     27AF    2A61 
DIV1     21A3    219C 21C7 2B82 
DIV2     21BB    21B0 
DIV3     21BE    21B9 
DOPEN1   2065    2C47 
DOPEN4   2068    2C02 
E        0004    2ABC 2B0B 2B0D 2B0F 2B48 
ENDBUF   0016    231E 2890 290C 
ENDCODE  2D21    2009 
ENDDO    2086    2641 264A 2C44 2C6C 2C7D 
ENDLIN   E024    
ENDSTK   000E    22C1 22C5 2939 293B 
EOPROG   0013    2042 2044 273B 273D 296E 2975 2977 2979 
EORA     223F    29F5 
ESCERR   29C3    29A1 
EXCODE   29A6    299B 
EXEC     2912    2920 
EXECUTE  2929    
EXEC1    293D    
EXEC2    2956    2950 
EXEC3    2943    274C 
EXIT     2CB3    2C8E 2CA5 2CCD 
EXST     26E7    220F 2A55 
EXTABLE  29CD    2916 
FADD     2AEE    2762 
FALSE    27D7    27F8 27FD 2806 280B 280D 2818 
FBASE    2507    2524 2598 
FBASE1   2513    2521 
FBASE2   2523    2511 
FBASE3   2524    24F8 255D 
FCOM     281A    2A79 
FCOMPL   2B2D    281D 2AB4 2AE8 
FDIV     2B3B    27B2 
FDIV1    2B43    2B67 
FDIV2    2B46    2B4C 
FDIV3    2B50    2B56 
FDIV4    2B55    2B51 
FEQU     27D2    2A6D 
FETCH    248F    2448 245D 2484 2489 24A5 24AD 24EA 24EE 24F3 2535 2539 
                 2546 254F 2553 2558 256E 257F 2587 2594 2613 2673 267A 
                 2685 268C 2691 269A 26B3 26FD 2701 270A 270E 29A6 
FGRE     2801    2A6D 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 52

FGRT     2808    2A6D 
FIBPTB   0349    2C0A 2C5B 2C86 2CD4 2D0B 
FIDRTB   0339    2B92 2C28 2CBA 2CEB 2CFE 2D1A 
FIDVTB   0341    2BA6 2C5E 2C6F 
FILCYC   0311    2BEE 
FILCY1   0330    2924 
FILDRV   00DC    25E5 2927 2BA4 2C61 2C72 
FILEA    031C    2BD3 2BDA 
FILERR   00DB    2827 2B9E 2BAF 2C22 2C2D 2CB1 2CC1 2CE0 2CFB 2D1E 
FILFLG   00DA    25F5 28A9 28C2 292B 2BB4 2BB8 2C13 
FILLOC   0313    25EA 
FILNAM   0301    2BE5 
FILNM1   0320    2919 2BE2 
FILSA    031A    2BCD 2BD7 
FILSA1   0331    2947 294A 
FILSIZ   0315    2BC6 2BC9 2BF5 
FILSTP   0312    295B 
FILTYP   0300    2BBE 2C1A 2C36 
FIRCTB   0351    2C0D 2C56 2C9D 2CC5 
FIX      2B88    27C8 2B8C 
FIXF     27C5    2A61 
FLEE     2811    2A6D 
FLES     27FA    2A6D 
FLOAT    2ACA    27BC 
FLOF     27B8    2A61 
FMUL     2B15    27A9 
FNAM     25D6    2A31 
FNEQ     27F3    2A6D 
FSUB     2AE8    27A0 27ED 
GETACC   26CF    26C9 26DE 
GETBACK  2757    203F 2046 204D 2054 205B 
GETBYTE  2C96    2841 
GETBYT1  2CA7    2CA0 
GETC     232A    2A0D 
GETCHR   E003    
GETCHR0  2882    232D 2342 2356 
GETCHR1  2886    288D 
GETCHR2  2890    2888 
GETCHR3  289B    2892 
GETCHR4  28A0    2884 
GETCHR5  28A6    28A1 
GETCHR6  28B1    
GETC1    2330    
GETFLP   2791    27C5 281A 
GETFLP2  277C    275F 279D 27A6 27AF 27EA 
GETKEY   E000    28A3 
GETLIN   E006    2300 25DC 
GETN     2337    2A0D 
GETNAM   F815    25DF 
GETNEWR  2C80    2CA2 2CCA 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 53

GETNEW1  2C90    2C89 
GETN0    2342    2347 
GETN1    2352    234B 
GETN2    2356    234F 2354 2386 238A 
GETN3    238C    235B 235F 
GETR     283E    2A79 
GETR1    284B    283E 2861 
GETSIGN  213C    2102 
GETSI1   215F    2149 
GETS2    22CF    2269 2274 2282 22E8 22F0 22F6 2399 240C 2442 24CC 256B 
                 25CE 2610 266D 26E1 2867 
GETTREC  2C53    2C4C 2C93 
GHGH     2620    2A3D 
GLOW     2624    2A3D 
GSEC     263B    2A49 
HARGUM   200D    25E2 25E7 
ILLC     29AF    
INCA     2297    2A01 
INCB     2452    2A19 
INCB1    2470    24B4 
INCS2    22B6    22A7 27BF 
INCS2A   22C1    2472 
INCW     249A    2A19 
IOCHECK  0023    2823 290E 
JMPO     24DE    2A25 
JMPZ     24C9    24E4 2A25 
JUMP     24B7    24D0 25C7 2A25 
KCHAR    00FE    285C 2CDA 
LEFT     2261    227C 2A01 
LEFT1    226C    2271 
LEFT2    2274    2267 2280 
LINBUF   0024    2309 2317 289D 
LITB     2445    2A19 
LITW     2481    2A19 
LOAD     24E7    2A25 
LOAD1    24F6    254C 
LOAD2    24FB    26AC 26CC 
LODI     26C9    2A55 
LODN     269A    2A49 
LODN1    269E    26B0 
LODX     2535    2A25 
LOOP     299B    2062 29A3 
LOWB     21D9    29E9 
LOWB1    21DD    21EF 21F3 2207 
M1       0001    2770 2777 2795 279A 27BA 27CB 27F0 2AA1 2AA5 2AB0 2AD0 
                 2AD6 2AD8 2ADA 2ADC 2ADF 2AFD 2B58 2B5A 2B5C 2B6B 2B6D 
                 2B6F 
M2       001C    2780 2785 278F 2AA3 2B46 2B53 2B5E 2B60 2B62 
MAXSEQ   0336    2B8F 2CE6 
MAXSIZ   0337    2BC3 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 54

MDEND    2B29    2B69 
MD1      2AAB    2B15 2B3B 
MD2      2B6B    2B1A 2B40 
MD3      2B79    2B73 2B80 
MULA     2102    29DD 
MULF     27A6    2A61 
MULTA    14E0    2108 2123 
MULTB    14E1    210D 211A 2128 
MULTR    14E2    2110 2115 211E 212C 
MUL1     2B1E    2B27 
MUL2     2B26    2B21 
NBYT     2673    2A49 
NBYT1    2677    2682 
NEGA     20C5    2139 2142 2193 21D5 225E 2277 2390 23A0 29DD 
NORM     2ADC    2AD2 2AF7 2B2B 
NORMX    2B2B    2B77 
NORM1    2AD4    2AE5 
NOTA     2251    29F5 
NUMCHR   178A    230D 
NWRD     2685    2A49 
NWRD1    2689    2697 
OPEN     F00F    25FA 
OPENNEW  2BB8    
OPENNE1  2BE2    2BE9 
OPENNE3  2C02    2BFB 
OPENNE4  2C10    2C51 
OPENNE5  2C25    2C1D 
OPENNE6  2C2F    2C4F 
OPENOLD  2C30    2BB6 
OPENOL1  2C44    2C3D 
OPENRA   2B8F    2832 2B9A 
OPENRA1  2BA1    2B97 
OPENRA2  2BB2    2BAB 
OPNR     25F3    2606 2A31 
OPNW     2604    2A3D 
OPRA     282F    2A79 
ORAC     221B    29F5 
OUTST1   2422    243A 
OVCHK    2B80    2B71 
OVFL     2B82    2B02 2B64 
PC       000A    2050 2052 20BB 20C2 2491 2493 2497 24B9 24BC 24C0 24C2 
                 24C4 24C6 24D2 24D7 24DB 25B1 25B6 272D 272F 28E7 28EE 
                 2907 2914 2990 2995 
PEEK     22DD    2A01 
PERROR   28CA    2006 21A0 22CC 271A 282C 2953 2964 29B1 29CA 
PERROR1  2902    28F4 28F6 
PHGH     2629    2A3D 
PLOW     2632    2A49 
POINT    00FA    2CAD 2CDC 
POKE     22E6    2A0D 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 55

PREPDO   2080    2670 
PREPRD   2089    2C30 
PREPSEC  264D    263B 2644 
PREPSR   2071    2C63 2C74 
PREPSR1  2074    2C66 2C77 
PREPWRA  208C    2BEB 
PREPWRB  208F    2BF1 
PRFLB1   206B    2C33 
PRTAX    E030    
PRTBYT   E02D    28E4 
PRTC     2394    2A0D 
PRTCHR   E009    28B6 
PRTCHR0  28B2    2396 23A5 2404 2426 2619 
PRTCHR1  28B9    28B4 
PRTCHR2  28BF    28BA 
PRTI     2613    261D 2A3D 
PRTINF   E027    201E 22FC 2324 25D6 25ED 28CA 28F8 2956 
PRTN     239C    28FF 2A19 
PRTN1    23A8    239E 
PRTN2    23C1    23CB 
PRTN3    23CD    23D7 
PRTN4    23DA    23E2 
PRTN5    23DB    23DF 
PRTN6    23E4    23E8 
PRTN7    23F4    240A 
PRTN8    2407    23FC 
PRTRSA   E836    
PRTS     240F    2A19 
PSEC     2644    2A49 
PUTBYTE  2CB4    2864 
PUTBYT0  2CC4    2CBD 
PUTBYT1  2CCF    2CC8 
PUTFLP   2770    276C 27C2 2820 
PUTFLP0  2765    27A3 27AC 27B5 
PUTR     285A    2A79 
PUTTREC  2C6F    2C8B 2D10 
RDEV     25D1    2A31 
RDFILE   E815    294D 
READ     207A    263E 2C69 
READCH   F018    28AB 
RETN     2092    29DD 
RIGH     227A    2263 2A01 
RIGH1    2285    2294 
RLIN     22FC    288A 2A0D 
ROR1     2B06    2B12 
ROR2     2B0B    2B08 
RTAR     2AFD    2B85 
RTLOG    2B00    2AF9 
RTLOG1   2B04    2B1E 
RTRN     2B8E    

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 56

RTS1     2AE7    2AE1 
RUN      2967    2960 
RUNERR   000C    28E2 2999 
RUNP     271D    2A55 
SAVE     274F    2723 272A 2731 2738 273F 
SAVRST   0333    2C80 2C90 2C96 2CAA 2CB4 2CD7 
SDEV     25CA    2A31 
SECTOR   00DE    265D 
SETFID   E81E    2BDD 
SFLAG    1781    299E 29C5 
SIGN     0010    2137 213E 214B 214D 218F 21D1 2340 234D 238C 23F4 2407 
                 2AAB 2AB7 2B29 
SP       0008    2039 203B 2097 209D 20A1 20A6 20AC 20B1 20B6 20BE 20D6 
                 20DD 20E3 20E8 20EC 20F2 20F9 2147 2153 215A 2162 2169 
                 216E 221D 2224 222F 2236 2241 2248 22AE 22B3 22B9 22BB 
                 22BF 22C3 22D1 22D6 2413 241B 2434 2438 243D 2440 2456 
                 245B 2467 2469 246C 246E 2470 2477 247C 249E 24A3 24A9 
                 24AB 24B0 24B2 2574 257A 259F 25A4 25A9 25AE 25B3 25B8 
                 25BA 25C1 262B 2634 265B 2661 2665 26E9 26EE 26F3 26F8 
                 2742 2744 274F 2753 2758 275C 2765 276A 276E 2774 2779 
                 277E 2783 2788 278D 2793 2798 2850 2871 2876 287A 287F 
                 2980 2987 
STOI     26DE    2A55 
STON     26B3    2A55 
STON1    26B7    26C6 
STOP     2010    2902 29DD 
STOP1    2033    2017 201C 
STOR     254F    2A25 
STOR1    255D    2591 
STOR2    2560    26C2 26E4 
STOX     256E    2A31 
STPROG   0011    2010 2012 2049 204B 2734 2736 28EA 28F0 2943 2945 2969 
                 296C 2971 2973 2989 298B 2A8D 2A8F 2A94 
SUBA     20EF    21E4 21FF 29DD 
SUBF     279D    2A61 
SWAP     2ABA    2AFB 
SWAP1    2ABC    2AC7 
SWA2     286A    2A79 
SWA3     2871    286C 
SWPALG   2AEB    2AF2 
TABLE    29DD    29B6 29BB 
TEQU     21E4    21F5 29E9 
TEQU1    21F1    21EB 
TESTF    27EA    27D2 27F3 27FA 2801 2808 2811 
TESTRA   2CE3    2C99 2CB7 2D08 
TESTRA1  2CEB    2CF5 
TESTRA2  2CF5    2CE9 
TESTRA3  2CF7    2CF2 
TFER     2823    28AE 28C7 2A79 
TFER1    282B    2825 

----------------------------------------------------------------------

R65 PASCAL: LABELS                 01/06/82   R65 ASSEMBLER  PAGE 57

TFER2    282C    2829 
TGRE     2209    29E9 
TGRT     220F    2215 29F5 
TIND     26FD    2A55 
TINDERR  2718    2708 2715 
TLEE     2215    29F5 
TLES     21FF    2209 2212 29E9 
TNEQ     21F5    220C 2218 29E9 
TRACK    00DD    2663 
TRUE     27E0    27D5 27F6 27FF 2804 280F 2814 2816 
USEREND  200B    292D 2930 
USERST   2009    2014 2019 293D 2940 2A87 2A8A 
VIDPNT   00E9    2305 
VMON     17D5    2030 
WARMST   2905    2003 2A9B 
WRITCH   F01B    28C4 
WRITE    207D    2647 2C7A 
X1       0000    2ABE 2AC2 2ACC 2AD4 2AE3 2AF0 2B00 2B18 2B32 2B34 2B3E 
                 2B7B 2B88 
X2       001B    278A 2AC0 2AC4 2AEE 
